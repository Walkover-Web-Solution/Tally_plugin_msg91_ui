import{b as k}from"./chunk-QYV6I66U.js";import{a as at,b as mt}from"./chunk-BD7VYUVO.js";import{b as O}from"./chunk-QBOR755N.js";import{c as W,i as X,j as J,k as K,l as Q,m as Y,n as et,o as nt,p as it,q as ot,r as rt,s as lt}from"./chunk-C2QWTHSQ.js";import{A as U,m as V,t as H,w as $}from"./chunk-PGL7W3XZ.js";import{a as A,c as R}from"./chunk-YMPLTWDW.js";import{a as Z,b as tt}from"./chunk-35D5JPZV.js";import{a as T,b as I}from"./chunk-25VFQOYL.js";import{a as F,b as C,d as z,e as D,f as B,h as v,i as q,j as G,l as j,m as L}from"./chunk-MOIXQHVC.js";import"./chunk-GY2SOU2E.js";import{$a as y,Eb as l,Ib as P,Sa as p,Wa as b,cc as S,db as g,dc as N,jc as E,kb as d,nb as i,ob as o,pb as h,qb as M,rb as w,tb as x,vb as f,wa as u,wb as c,xa as s}from"./chunk-H3RJLV3I.js";var ut=a=>({"invalid-input":a});function st(a,m){a&1&&(i(0,"mat-error"),l(1,"Please enter a valid mobile Number"),o())}function pt(a,m){if(a&1){let t=x();M(0),i(1,"mat-form-field",14)(2,"input",15,0),f("keydown.enter",function(){u(t);let e=c();return s(e.intlPhone!=null&&e.intlPhone.isRequiredValidNumber?e.sendOtp():null)})("keypress",function(e){u(t);let r=c();return s(r.intlPhone==null?null:r.intlPhone.onlyPhoneNumber(e))})("input",function(){let e,r;u(t);let _=c();return(e=_.loginform.get("mobileNumber"))==null||e.setValue(_.intlPhone.phoneNumber),s(_.intlPhone!=null&&_.intlPhone.isValidNumber||(r=_.loginform.get("mobileNumber"))==null?null:r.setErrors({invalidNumber:!0}))})("blur",function(){let e;u(t);let r=c();return s((e=r.loginform.get("mobileNumber"))==null?null:e.markAsTouched())}),o(),i(4,"div",16),g(5,st,2,0,"mat-error",8),o()(),i(6,"button",17),f("click",function(){u(t);let e=c();return s(e.sendOtp())}),l(7," Send"),o(),w()}if(a&2){let t,n,e,r=c();p(2),d("ngClass",P(3,ut,((t=r.loginform.get("mobileNumber"))==null?null:t.touched)&&!(r.intlPhone!=null&&r.intlPhone.isRequiredValidNumber))),p(3),d("ngIf",((n=r.loginform.get("mobileNumber"))==null?null:n.touched)&&r.intlPhone&&!(r.intlPhone!=null&&r.intlPhone.isRequiredValidNumber)),p(),d("disabled",!(r.intlPhone!=null&&r.intlPhone.isRequiredValidNumber)||((e=r.loginform.get("mobileNumber"))==null?null:e.invalid)||!((e=r.loginform.get("mobileNumber"))!=null&&e.value))}}function dt(a,m){a&1&&(i(0,"mat-error"),l(1,"Enter a valid OTP"),o())}function ft(a,m){if(a&1){let t=x();i(0,"div")(1,"button",18),f("click",function(){u(t);let e=c();return s(e.backtoMobile())}),i(2,"mat-icon"),l(3,"keyboard_backspace"),o(),l(4,"Back"),o(),i(5,"div",19)(6,"mat-form-field",20)(7,"mat-label"),l(8,"OTP"),o(),h(9,"input",21),g(10,dt,2,0,"mat-error",8),o()(),i(11,"div",22)(12,"button",23),f("click",function(){u(t);let e=c();return s(e.verifyOtp())}),l(13,"Login"),o()()()}if(a&2){let t,n=c();p(10),d("ngIf",(t=n.loginform.get("otp"))==null?null:t.invalid)}}var ct=class a{constructor(m,t){this.store=m;this.router=t;this.existotpverify$=this.store.select(W)}islogin=!1;isOtpSent=!1;mobileNumber="";existotpverify$;mobilefield=!0;intlPhone;ngAfterViewInit(){this.mobilefield&&setTimeout(()=>{this.initIntlPhone()})}initIntlPhone(){let m=document.querySelector("app-root")?.shadowRoot,t=document?.getElementById("mobile-input-wrapper"),n="assets/util/intl-tel-input-custom.css";t&&(this.intlPhone=new mt(t,m,n,!0))}loginform=new B({mobileNumber:new v("",[C.required,C.pattern(at)]),otp:new v("")});register(){this.router.navigate(["/register"])}otpsend(){this.islogin=!0}sendOtp(){let m=this.intlPhone?.phoneNumber||"",t=m.startsWith("+")?m.slice(1):m;!t&&t.length==12||(this.store.dispatch(H({mobile:t})),this.isOtpSent=!0,this.mobilefield=!1)}verifyOtp(){let m=this.loginform.get("mobileNumber")?.value??"",t=this.loginform.get("otp")?.value??"";!t||t.length!==4||(this.store.dispatch($({request:{mobile:m,otp:t}})),this.existotpverify$.subscribe(n=>{n&&(this.router.navigate(["/layout/logs"]),this.store.dispatch(U()))}))}backtoMobile(){this.isOtpSent=!1,this.mobilefield=!0,setTimeout(()=>{this.initIntlPhone()},100)}static \u0275fac=function(t){return new(t||a)(b(V),b(O))};static \u0275cmp=y({type:a,selectors:[["app-auth"]],decls:32,vars:3,consts:[["mobileInput",""],[1,"content"],[1,"align-items-center","first"],[1,"align-items-center"],[1,"ml-5","login-content"],[1,"login-content1"],[1,"mt-4"],[3,"formGroup"],[4,"ngIf"],[1,"ml-4","mt-4","account"],[1,"cursor-pointer","text-underline","link",3,"click"],[1,"card"],[1,"card-content"],[1,"highlight"],["appearance","outline",1,"w-100",2,"position","relative","z-index","2"],["matInput","","formControlName","mobileNumber","placeholder","Enter the mobile number","type","tel","id","mobile-input-wrapper",3,"keydown.enter","keypress","input","blur","ngClass"],[2,"position","absolute","bottom","-23px"],["mat-flat-button","","color","primary",3,"click","disabled"],["mat-button","",3,"click"],[1,"mt-2"],["appearance","outline",1,"w-100"],["matInput","","formControlName","otp","placeholder","Enter OTP"],[1,"justify-content-center"],["mat-flat-button","","color","primary",3,"click"]],template:function(t,n){t&1&&(i(0,"div",1)(1,"div",2)(2,"div",3)(3,"p",4),l(4,"Welcome Back!"),o(),i(5,"p",5),l(6,"Start Managing your finance better and faster"),o()(),i(7,"div",6)(8,"form",7),g(9,pt,8,5,"ng-container",8)(10,ft,14,1,"div",8),o()(),i(11,"p",9),l(12,"Doesn't have an account? "),i(13,"a",10),f("click",function(){return n.register()}),l(14,"Register Here"),o()()(),i(15,"div")(16,"mat-card",11)(17,"mat-card-header")(18,"mat-card-title"),l(19,"Tally Plugin By MSG91"),o()(),i(20,"mat-card-content")(21,"p",12),l(22,"Send Invoices on Whatsapp and Email "),h(23,"br"),l(24," Via Tally"),o(),h(25,"mat-divider"),i(26,"p",13),l(27,"Automate your financial processes effortlessly with Tally. "),o(),i(28,"p"),l(29,"Streamline invoicing, effortlessly share ledgers, and efficiently recover"),o(),i(30,"p"),l(31," outstanding amounts, all within the Tally platform."),o()()()()()),t&2&&(p(8),d("formGroup",n.loginform),p(),d("ngIf",n.mobilefield),p(),d("ngIf",n.isOtpSent))},dependencies:[E,S,N,k,Y,X,K,Q,J,R,A,ot,it,et,nt,tt,Z,lt,rt,I,T,L,q,F,z,D,G,j],styles:[".content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;box-sizing:border-box;background-color:#f5f5f5}.login-left[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;font-size:1.5rem;font-weight:700;padding:20px;margin-bottom:25%}.login-left[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin-top:10px}.card[_ngcontent-%COMP%]{height:700px;width:600px;padding:20px;background:#fff;box-shadow:0 4px 10px #0000001a;border-radius:10px}.first[_ngcontent-%COMP%]{margin-left:300px}.login-content[_ngcontent-%COMP%]{font-weight:700;font-size:xx-large}.login-content1[_ngcontent-%COMP%]{font-size:large;font-weight:500}.account[_ngcontent-%COMP%]{font-size:medium;font-weight:600}.link[_ngcontent-%COMP%]{color:#1b69a7}.mat-mdc-card-title[_ngcontent-%COMP%]{font-weight:400;font-size:35px}.highlight[_ngcontent-%COMP%]{font-size:30px;font-weight:500}.card-content[_ngcontent-%COMP%]{font-weight:700;font-size:15px}@media (max-width: 768px){.content[_ngcontent-%COMP%]{flex-direction:column;justify-content:center}.login-left[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]{width:90%;text-align:center}}"]})};export{ct as AuthComponent};

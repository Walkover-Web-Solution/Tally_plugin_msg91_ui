import{b as de}from"./chunk-QZ7BSZRH.js";import{a as q,b as B}from"./chunk-ZFTA7BNB.js";import{a as fe}from"./chunk-TNLNHO5P.js";import{a as oe,e as le,f as ae,g as me,i as se,j as pe,k as ue,l as ce}from"./chunk-VDX6NWKR.js";import{a as A,c as G}from"./chunk-D4AXIO5U.js";import{b as L}from"./chunk-EZFLHSCW.js";import"./chunk-DYV4KVQS.js";import{b as Q,c as X,d as Y,g as Z,i as ee}from"./chunk-XGUBUGXG.js";import{C as b,D as z,F as W,G as H,H as J,K,L as te,M as ie,O as ne,R as re,m as $,n as g,u as D,v as u,x as j,y as U,z as w}from"./chunk-7QRTSTHZ.js";import{Hb as a,Mb as k,Pb as y,Qb as C,Ra as m,Va as h,_a as I,cb as d,ic as O,kb as s,kc as x,pc as T,qb as n,qc as V,rb as t,sb as _,wa as E,wb as R,xa as M,yb as f,zb as v}from"./chunk-536KNH2V.js";var be=i=>({"invalid-input":i});function _e(i,r){i&1&&(n(0,"mat-error"),a(1," Only alphabets are allowed "),t())}function he(i,r){i&1&&(n(0,"mat-error"),a(1," This is a required field "),t())}function ve(i,r){i&1&&(n(0,"mat-error"),a(1," Only alphabets are allowed "),t())}function ye(i,r){i&1&&(n(0,"mat-error"),a(1," Invalid email format "),t())}function Ce(i,r){i&1&&(n(0,"mat-error"),a(1," This is a required field "),t())}function we(i,r){i&1&&(n(0,"mat-error"),a(1,"Please Enter a valid mobile Number"),t())}function Fe(i,r){if(i&1){let o=R();n(0,"div",25)(1,"mat-form-field",13),_(2,"input",26),t(),n(3,"button",27),y(4,"async"),f("click",function(){E(o);let l=v();return M(l.verifyOtp())}),a(5,"Verify "),t()()}if(i&2){let o=v();m(3),s("msg91ButtonLoader",C(4,1,o.verifyingloading$))}}var ge=class i{constructor(r,o){this.store=r;this.router=o;this.otpVerified$=this.store.pipe(g(Q)),this.registerUser$=this.store.pipe(g(Z)),this.walletbalance$=this.store.pipe(g(ee)),this.otpNotVerified$=this.store.pipe(g(Y)),this.verifyingloading$=this.store.pipe(g(X))}otpSent=!1;otpVerified=!1;balance=0;otpVerified$;otpNotVerified$;registerUser$;walletbalance$;intlPhone;verifyingloading$;ngAfterViewInit(){setTimeout(()=>{this.initIntl()},100)}registrationForm=new w({user:new w({fname:new b("",[u.required,u.minLength(3),u.maxLength(24)]),lname:new b("",[u.minLength(3),u.maxLength(25)]),email:new b("",[u.required]),mobile:new b("",[u.required]),otp:new b("",[u.minLength(4),u.maxLength(4)])})});initIntl(){let r=document.querySelector("app-root")?.shadowRoot,o=document?.getElementById("mobile-input-wrapper"),e="assets/util/intl-tel-input-custom.css";o&&(this.intlPhone=new de(o,r,e,!0))}sendotp(){let r=this.registrationForm.get("user.mobile")?.value??"";r&&(this.store.dispatch(te({mobile:r})),this.otpSent=!0)}verifyOtp(){let r=this.registrationForm.get("user.mobile")?.value??"",o=this.registrationForm.get("user.otp")?.value??"";!o||o.length!==4||this.store.dispatch(ie({request:{mobile:r,otp:o}}))}submit(){let r=this.registrationForm.get("user.fname")?.value??"",o=this.registrationForm.get("user.email")?.value??"",e=this.registrationForm.get("user.mobile")?.value??"";this.store.dispatch(ne({name:r,email:o,mobile:e})),this.registerUser$.subscribe(l=>{l&&(this.router.navigate(["/layout/logs"]),this.store.dispatch(re()))}),this.walletbalance$.subscribe(l=>{l&&l.balance&&(this.balance=l.balance)})}login(){this.router.navigate(["/login"])}static \u0275fac=function(o){return new(o||i)(h($),h(L))};static \u0275cmp=I({type:i,selectors:[["app-register"]],decls:43,vars:14,consts:[[1,"d-flex","justify-content-center","align-items-center"],[1,"outline-card","reg-form"],[1,"d-flex","align-items-center"],["matTooltip","Go back","matTooltipPosition","below","matTooltip","Go back","matTooltipPosition","below",1,"ml-4","cursor-pointer",3,"click"],[1,"flex-grow-1"],[1,"ml-10"],[1,"app-content","d-flex","justify-content-center","align-items-center"],[3,"formGroup"],["formGroupName","user"],[1,"d-flex","gap-2","flex-column","mt-3"],["color","primary","appearance","outline",1,"w-100"],["matInput","","formControlName","fname","placeholder","First Name"],[4,"ngIf"],["appearance","outline",1,"w-100"],["matInput","","formControlName","lname","placeholder","Last Name"],["matInput","","formControlName","email","placeholder","Email"],[1,"d-flex","flex-column","gap-2",2,"width","400px"],[1,"input-wrapper","d-flex","gap-4","align-items-baseline"],["appearance","outline",1,"w-100",2,"position","relative","z-index","2"],["matInput","","type","tel","formControlName","mobile","placeholder","Mobile Number","id","mobile-input-wrapper",3,"keydown.enter","keypress","input","blur","ngClass"],[2,"position","absolute","bottom","-23px"],["mat-flat-button","","color","primary",3,"click"],["class","d-flex gap-4 align-items-baseline",4,"ngIf"],[1,"mt-4","w-100"],["mat-flat-button","","type","submit","color","primary",1,"w-100",3,"click","disabled"],[1,"d-flex","gap-4","align-items-baseline"],["matInput","","formControlName","otp","placeholder","OTP"],["mat-flat-button","","color","primary",3,"click","msg91ButtonLoader"]],template:function(o,e){if(o&1&&(n(0,"div",0)(1,"mat-card",1)(2,"div",2)(3,"div",3),f("click",function(){return e.login()}),n(4,"mat-icon"),a(5,"arrow_back"),t()(),n(6,"div",4)(7,"h2",5),a(8,"Register Form"),t()()(),n(9,"div",6)(10,"form",7)(11,"div",8)(12,"div",9)(13,"mat-form-field",10)(14,"mat-label"),a(15,"First Name"),t(),_(16,"input",11),d(17,_e,2,0,"mat-error",12)(18,he,2,0,"mat-error",12),t(),n(19,"mat-form-field",13)(20,"mat-label"),a(21,"Last Name"),t(),_(22,"input",14),d(23,ve,2,0,"mat-error",12),t(),n(24,"mat-form-field",13)(25,"mat-label"),a(26,"Email"),t(),_(27,"input",15),d(28,ye,2,0,"mat-error",12)(29,Ce,2,0,"mat-error",12),t()(),n(30,"div",16)(31,"div",17)(32,"mat-form-field",18)(33,"input",19),f("keydown.enter",function(){return e.intlPhone!=null&&e.intlPhone.isRequiredValidNumber?e.sendotp():null})("keypress",function(p){return e.intlPhone==null?null:e.intlPhone.onlyPhoneNumber(p)})("input",function(){let p,c;return(p=e.registrationForm.get("user.mobile"))==null||p.setValue(e.intlPhone.phoneNumber),e.intlPhone!=null&&e.intlPhone.isValidNumber||(c=e.registrationForm.get("user.mobile"))==null?null:c.setErrors({invalidNumber:!0})})("blur",function(){let p,c;return(p=e.registrationForm.get("user.mobile"))==null||p.markAsTouched(),(c=e.registrationForm.get("user.mobile"))==null?null:c.setValue(e.intlPhone==null||e.intlPhone.phoneNumber==null?null:e.intlPhone.phoneNumber.replace("+",""))}),t(),n(34,"div",20),d(35,we,2,0,"mat-error",12),t()(),n(36,"button",21),f("click",function(){return e.sendotp()}),a(37,"Send"),t()(),d(38,Fe,6,3,"div",22),t(),n(39,"div",23)(40,"button",24),y(41,"async"),f("click",function(){return e.submit()}),a(42,"Submit"),t()()()()()()()),o&2){let l,p,c,F,P,N,S;m(10),s("formGroup",e.registrationForm),m(7),s("ngIf",(l=e.registrationForm.get("user.fname"))==null?null:l.hasError("pattern")),m(),s("ngIf",(p=e.registrationForm.get("user.fname"))==null?null:p.touched),m(5),s("ngIf",(c=e.registrationForm.get("user.lname"))==null?null:c.hasError("pattern")),m(5),s("ngIf",(F=e.registrationForm.get("user.email"))==null?null:F.hasError("pattern")),m(),s("ngIf",(P=e.registrationForm.get("user.email"))==null?null:P.touched),m(4),s("ngClass",k(12,be,((N=e.registrationForm.get("user.mobile"))==null?null:N.touched)&&!(e.intlPhone!=null&&e.intlPhone.isRequiredValidNumber))),m(2),s("ngIf",((S=e.registrationForm.get("user.mobile"))==null?null:S.touched)&&e.intlPhone&&!(e.intlPhone!=null&&e.intlPhone.isRequiredValidNumber)),m(3),s("ngIf",e.otpSent),m(2),s("disabled",!C(41,10,e.otpVerified$))}},dependencies:[pe,se,ae,me,V,O,x,T,K,z,D,j,U,W,J,H,ce,ue,le,oe,G,A,fe,B,q],styles:["body[_ngcontent-%COMP%]{height:100vh;margin:0;background-color:#7fffd4}.app-content[_ngcontent-%COMP%]{background-color:#fff}button[_ngcontent-%COMP%]{font-size:16px;width:100px}.reg-form[_ngcontent-%COMP%]{min-width:600px;background-color:#fff;box-shadow:#fff;height:640px;width:300px;margin-top:30px}.field[_ngcontent-%COMP%]{display:flex;flex-direction:column}.input-wrapper[_ngcontent-%COMP%]{width:100%}@media (max-width: 768px){.reg-form[_ngcontent-%COMP%]{min-width:80%}.reg-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{flex-direction:column}}"]})};export{ge as RegisterComponent};

import{a as vt,b as yt,c as Ct,d as kt,e as It,f as se,g as le,h as de,i as St}from"./chunk-QMTQQBOC.js";import{a as wt}from"./chunk-UOG7XHUG.js";import{a as gt}from"./chunk-XXM6P6N7.js";import{a as te,d as ie,e as ae,f as ce,g as oe}from"./chunk-DFGKABVO.js";import{a as He,b as Ye,c as Ze,d as Je,e as et,f as tt}from"./chunk-ZBFM5A7G.js";import{a as Ke,b as We,c as W}from"./chunk-SE3VEQTT.js";import{a as O,b as ne}from"./chunk-CIOCNEJN.js";import"./chunk-BYUUP24I.js";import"./chunk-DYV4KVQS.js";import{e as _t,f as re,i as bt}from"./chunk-663WTBCT.js";import{E as dt,F as mt,G as pt,H as ht,a as it,b as H,c as at,e as Y,f as ct,g as ot,i as nt,j as T,k as rt,l as Z,m as st,o as lt,q as J,r as ee}from"./chunk-SSU4MBWM.js";import{F as ut,I as ft,L as ve,m as Q,n as P}from"./chunk-A52KVOWL.js";import{a as Qe,b as Xe}from"./chunk-WDOWR2HF.js";import{$a as C,Bb as I,Bd as Ge,Ca as Ae,Cb as j,Cd as Ue,Db as z,Fb as F,Ga as w,Gb as E,Hb as A,Hd as K,Ib as S,Jb as d,K as Ie,Ka as De,Kb as Ne,Lb as q,M as ue,Mb as B,Nc as X,Oa as Te,Q as V,Rb as _e,Sa as l,Sb as be,Tb as Re,Wa as f,Xa as Ve,Xb as G,ab as ge,bb as Pe,cb as M,da as y,db as u,fd as Le,ha as Se,j as ke,ja as fe,jb as N,kb as s,la as xe,lc as U,mb as R,mc as D,oa as Me,qb as c,rb as o,rc as $e,s as h,sb as g,sc as x,sd as we,tb as $,td as je,ub as L,ud as ze,vd as qe,wa as Fe,wb as k,wd as Be,xa as _,xb as Oe,ya as b,za as Ee,zb as v}from"./chunk-W5V45PS6.js";var Vt=["*"],Pt=200,me=class i{constructor(r){this.sd=r}scrollableWrapper;scrollableElementId="";fetchNextPage=new w;fetchFirstPage=new w;destroy$=new ke;ngOnInit(){this.sd.scrolled().pipe(Ie(Pt),y(this.destroy$)).subscribe(r=>{let e=r?.getElementRef().nativeElement.id;if(r&&(e==="scrollableWrapper"||e===this.scrollableElementId)){let a=r.measureScrollOffset("bottom"),t=r.measureScrollOffset("top");a<=30&&t&&this.fetchNextPage.emit(e),t===0&&this.fetchFirstPage.emit(!0)}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(e){return new(e||i)(f(_t))};static \u0275cmp=C({type:i,selectors:[["msg91-cdk-scroll"]],viewQuery:function(e,a){if(e&1&&F(re,5),e&2){let t;E(t=A())&&(a.scrollableWrapper=t.first)}},inputs:{scrollableElementId:"scrollableElementId"},outputs:{fetchNextPage:"fetchNextPage",fetchFirstPage:"fetchFirstPage"},ngContentSelectors:Vt,decls:2,vars:0,consts:[["cdkScrollable","","id","scrollableWrapper",1,"cdk-scroll-wrapper",2,"overflow","auto","max-height","300px"]],template:function(e,a){e&1&&(j(),c(0,"div",0),z(1),o())},dependencies:[x,bt,re],encapsulation:2})};function zt(i,r){i&1&&(c(0,"mat-option",11),d(1," No Campaign Found "),o())}function qt(i,r){if(i&1&&(c(0,"mat-option",12)(1,"div",13)(2,"span"),d(3),o()()()),i&2){let e=r.$implicit;s("value",e),l(3),Ne(e.name)}}function Bt(i,r){if(i&1&&($(0),u(1,zt,2,0,"mat-option",9)(2,qt,4,2,"mat-option",10),L()),i&2){let e=r.ngIf;l(),s("ngIf",e.length===0),l(),s("ngForOf",e)}}var pe=class i extends ne{constructor(e,a){super();this.cdr=e;this.store=a}service=Me(wt);params={};apiInProgress$=h(!1);campaigns$=h([]);ValidatorFnRef;campaignAutocompleteRef;setFormValueForSingleCampaign;campaignForm;authkey;fetchCampaignInProcess$=null;fetchCampaignInProgressEmit=new w;createCampaignEmitter=new w;campaignSelected=new w;ngOnInit(){this.params={pageNo:1,itemsPerPage:25},this.campaignForm.value&&this.fetchCampaign(this.params,this.authkey)}ngOnChanges(e){e.authkey&&(this.campaigns$=h([]),this.campaignForm.setValue(""),this.params.pageNo=1,this.authkey&&this.fetchCampaign(this.params,this.authkey))}fetchNextCampaignPage(){this.campaigns$.pipe(ue(1)).subscribe(e=>{e.length===this.params.itemsPerPage*this.params.pageNo&&(this.params.pageNo+=1,this.fetchCampaign(this.params,this.authkey,!0))})}fetchCampaign(e,a,t){this.fetchCampaignInProgressEmit.emit(h(!0)),this.apiInProgress$=h(!0),this.service.getAllCampaignFlowFromApi(e,a)?.subscribe(n=>{let m;t?this.campaigns$.pipe(ue(1)).subscribe(p=>{p.push(...n.data.data),m=p,this.campaigns$=h(p)}):(this.campaigns$=h(n.data.data),this.setFormValueForSingleCampaign&&!e?.name&&n.data.data.length===1&&this.campaignForm.setValue(n.data?.data?.[0]??""),n.data.data.length===0&&this.createCampaignEmitter.observed&&!this.params?.name?.length&&this.createCampaignEmitter.emit(!1),m=n.data.data),this.campaignForm.updateValueAndValidity(),this.fetchCampaignInProgressEmit.emit(h(!1)),this.apiInProgress$=h(!1),this.cdr.detectChanges()},n=>{this.fetchCampaignInProgressEmit.emit(h(!1)),this.apiInProgress$=h(!1)})}campaignDisplayFunction(e){return e?.name}onCampaignSelected(e){let a=e.option.value;this.campaignSelected.emit(a)}refreshCampaigns(){this.campaigns$=h([]),this.campaignForm.setValue(""),this.fetchCampaign(this.params,this.authkey)}static \u0275fac=function(a){return new(a||i)(f(G),f(Q))};static \u0275cmp=C({type:i,selectors:[["app-campaign-autocomplete"]],viewQuery:function(a,t){if(a&1&&F(i,5),a&2){let n;E(n=A())&&(t.campaignAutocompleteRef=n.first)}},inputs:{setFormValueForSingleCampaign:"setFormValueForSingleCampaign",campaignForm:"campaignForm",authkey:"authkey",fetchCampaignInProcess$:"fetchCampaignInProcess$"},outputs:{fetchCampaignInProgressEmit:"fetchCampaignInProgressEmit",createCampaignEmitter:"createCampaignEmitter",campaignSelected:"campaignSelected"},features:[M,Fe],decls:16,vars:9,consts:[["campaignAutoComplete","matAutocomplete"],[1,"d-flex","flex-row","gap-3"],["appearance","outline",1,"w-25"],["type","text","matInput","",3,"matAutocomplete","formControl"],[3,"optionSelected","displayWith"],[3,"fetchNextPage"],["href","javascript:void(0);",1,"mat-option","text-primary","fw-bold","d-flex","align-items-center"],[4,"ngIf"],["mat-icon-button","","color","primary","matTooltip","Refresh Campaigns",1,"cursor-pointer",3,"click","msg91ButtonLoader"],["disabled","","value","",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["disabled","","value",""],[3,"value"],[1,"d-flex","justify-content-between"]],template:function(a,t){if(a&1){let n=k();c(0,"div",1)(1,"mat-form-field",2)(2,"mat-label"),d(3,"Select Campaign"),o(),g(4,"input",3),c(5,"mat-autocomplete",4,0),v("optionSelected",function(p){return _(n),b(t.onCampaignSelected(p))}),c(7,"msg91-cdk-scroll",5),v("fetchNextPage",function(){return _(n),b(t.fetchNextCampaignPage())}),g(8,"a",6)(9,"a",6),u(10,Bt,3,2,"ng-container",7),_e(11,"async"),o()()(),c(12,"button",8),_e(13,"async"),v("click",function(){return _(n),b(t.refreshCampaigns())}),c(14,"mat-icon"),d(15,"refresh"),o()()()}if(a&2){let n=S(6);l(4),s("matAutocomplete",n)("formControl",t.campaignForm),l(),s("displayWith",t.campaignDisplayFunction),l(5),s("ngIf",be(11,5,t.campaigns$)),l(2),s("msg91ButtonLoader",be(13,7,t.fetchCampaignInProcess$)||!1)}},dependencies:[ae,ie,te,oe,ce,de,se,K,le,x,U,D,$e,J,H,Y,ee,Z,me,Xe,Qe,gt,W,We],encapsulation:2})};var Gt=["switch"],Ut=["*"];function Qt(i,r){i&1&&(c(0,"div",12),Ee(),c(1,"svg",13),g(2,"path",14),o(),c(3,"svg",15),g(4,"path",16),o()())}var Xt=new xe("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1,hideIcon:!1})}),Kt={provide:it,useExisting:Se(()=>Ce),multi:!0},he=class{constructor(r,e){this.source=r,this.checked=e}},Wt=0,Ht=Be(ze(qe(je(class{constructor(i){this._elementRef=i}})))),Yt=(()=>{class i extends Ht{get required(){return this._required}set required(e){this._required=X(e)}get checked(){return this._checked}set checked(e){this._checked=X(e),this._changeDetectorRef.markForCheck()}get hideIcon(){return this._hideIcon}set hideIcon(e){this._hideIcon=X(e)}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(e,a,t,n,m,p,Tt){super(e),this._focusMonitor=a,this._changeDetectorRef=t,this.defaults=m,this._onChange=si=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this._hideIcon=!1,this.change=new w,this.toggleChange=new w,this.tabIndex=parseInt(n)||0,this.color=this.defaultColor=m.color||"accent",this._noopAnimations=p==="NoopAnimations",this.id=this._uniqueId=`${Tt}${++Wt}`,this._hideIcon=m.hideIcon??!1}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{e==="keyboard"||e==="program"?(this._focused=!0,this._changeDetectorRef.markForCheck()):e||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(e){this.checked=!!e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}static{this.\u0275fac=function(a){Ve()}}static{this.\u0275dir=Pe({type:i,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],required:"required",checked:"checked",hideIcon:"hideIcon"},outputs:{change:"change",toggleChange:"toggleChange"},standalone:!1,features:[M]})}}return i})(),Ce=(()=>{class i extends Yt{get buttonId(){return`${this.id||this._uniqueId}-button`}constructor(e,a,t,n,m,p){super(e,a,t,n,m,p,"mat-mdc-slide-toggle-"),this._labelId=this._uniqueId+"-label"}_handleClick(){this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new he(this,this.checked)))}focus(){this._switchElement.nativeElement.focus()}_createChangeEvent(e){return new he(this,e)}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}static{this.\u0275fac=function(a){return new(a||i)(f(De),f(Le),f(G),Ae("tabindex"),f(Xt),f(Te,8))}}static{this.\u0275cmp=C({type:i,selectors:[["mat-slide-toggle"]],viewQuery:function(a,t){if(a&1&&F(Gt,5),a&2){let n;E(n=A())&&(t._switchElement=n.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:11,hostBindings:function(a,t){a&2&&(Oe("id",t.id),N("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),R("mat-mdc-slide-toggle-focused",t._focused)("mat-mdc-slide-toggle-checked",t.checked)("_mat-animation-noopable",t._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],standalone:!1,features:[B([Kt]),M],ngContentSelectors:Ut,decls:13,vars:25,consts:[["switch",""],[1,"mdc-form-field"],["role","switch","type","button",1,"mdc-switch",3,"click","tabIndex","disabled"],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],["class","mdc-switch__icons",4,"ngIf"],[1,"mdc-label",3,"click","for"],[1,"mdc-switch__icons"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"]],template:function(a,t){if(a&1){let n=k();j(),c(0,"div",1)(1,"button",2,0),v("click",function(){return _(n),b(t._handleClick())}),g(3,"div",3),c(4,"div",4)(5,"div",5)(6,"div",6),g(7,"div",7),o(),c(8,"div",8),g(9,"div",9),o(),u(10,Qt,5,0,"div",10),o()()(),c(11,"label",11),v("click",function(p){return _(n),b(p.stopPropagation())}),z(12),o()()}if(a&2){let n=S(2);R("mdc-form-field--align-end",t.labelPosition=="before"),l(),R("mdc-switch--selected",t.checked)("mdc-switch--unselected",!t.checked)("mdc-switch--checked",t.checked)("mdc-switch--disabled",t.disabled),s("tabIndex",t.tabIndex)("disabled",t.disabled),N("id",t.buttonId)("name",t.name)("aria-label",t.ariaLabel)("aria-labelledby",t._getAriaLabelledBy())("aria-describedby",t.ariaDescribedby)("aria-required",t.required||null)("aria-checked",t.checked),l(8),s("matRippleTrigger",n)("matRippleDisabled",t.disableRipple||t.disabled)("matRippleCentered",!0),l(),s("ngIf",!t.hideIcon),l(),s("for",t.buttonId),N("id",t._labelId)}},dependencies:[Ge,D],styles:['.mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:var(--mdc-elevation-overlay-color)}.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative}.mdc-switch[hidden]{display:none}.mdc-switch:disabled{cursor:default;pointer-events:none}.mdc-switch__track{overflow:hidden;position:relative;width:100%}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%}@media screen and (forced-colors: active){.mdc-switch__track::before,.mdc-switch__track::after{border-color:currentColor}}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(-100%)}[dir=rtl] .mdc-switch__track::after,.mdc-switch__track[dir=rtl]::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track[dir=rtl]::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0)}[dir=rtl] .mdc-switch__handle-track,.mdc-switch__handle-track[dir=rtl]{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track,.mdc-switch--selected .mdc-switch__handle-track[dir=rtl]{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto}[dir=rtl] .mdc-switch__handle,.mdc-switch__handle[dir=rtl]{left:auto;right:0}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}@media screen and (forced-colors: active){.mdc-switch__handle::before,.mdc-switch__handle::after{border-color:currentColor}}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-elevation-overlay{bottom:0;left:0;right:0;top:0}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1}.mdc-switch:disabled .mdc-switch__ripple{display:none}.mdc-switch__icons{height:100%;position:relative;width:100%;z-index:1}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mdc-switch{width:var(--mdc-switch-track-width);--mdc-switch-disabled-handle-opacity:0.38;--mdc-switch-disabled-selected-icon-opacity:0.38;--mdc-switch-disabled-track-opacity:0.12;--mdc-switch-disabled-unselected-icon-opacity:0.38;--mdc-switch-handle-height:20px;--mdc-switch-handle-shape:10px;--mdc-switch-handle-width:20px;--mdc-switch-selected-icon-size:18px;--mdc-switch-track-height:14px;--mdc-switch-track-shape:7px;--mdc-switch-track-width:36px;--mdc-switch-unselected-icon-size:18px;--mdc-switch-state-layer-size:40px;--mdc-switch-selected-focus-state-layer-opacity:0.12;--mdc-switch-selected-hover-state-layer-opacity:0.04;--mdc-switch-selected-pressed-state-layer-opacity:0.1;--mdc-switch-unselected-focus-state-layer-opacity:0.12;--mdc-switch-unselected-hover-state-layer-opacity:0.04;--mdc-switch-unselected-pressed-state-layer-opacity:0.1}.mdc-switch.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color)}.mdc-switch.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color)}.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color)}.mdc-switch.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color)}.mdc-switch .mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color)}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation)}.mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation)}.mdc-switch .mdc-switch__focus-ring-wrapper,.mdc-switch .mdc-switch__handle{height:var(--mdc-switch-handle-height)}.mdc-switch:disabled .mdc-switch__handle::after{opacity:var(--mdc-switch-disabled-handle-opacity)}.mdc-switch .mdc-switch__handle{border-radius:var(--mdc-switch-handle-shape)}.mdc-switch .mdc-switch__handle{width:var(--mdc-switch-handle-width)}.mdc-switch .mdc-switch__handle-track{width:calc(100% - var(--mdc-switch-handle-width))}.mdc-switch.mdc-switch--selected:enabled .mdc-switch__icon{fill:var(--mdc-switch-selected-icon-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color)}.mdc-switch.mdc-switch--unselected:enabled .mdc-switch__icon{fill:var(--mdc-switch-unselected-icon-color)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity)}.mdc-switch.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size);height:var(--mdc-switch-selected-icon-size)}.mdc-switch.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size);height:var(--mdc-switch-unselected-icon-size)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-hover-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-focus-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-pressed-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-hover-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-focus-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-pressed-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-selected-hover-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-selected-focus-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-selected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-selected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-unselected-hover-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-unselected-focus-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity)}.mdc-switch .mdc-switch__ripple{height:var(--mdc-switch-state-layer-size);width:var(--mdc-switch-state-layer-size)}.mdc-switch .mdc-switch__track{height:var(--mdc-switch-track-height)}.mdc-switch:disabled .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity)}.mdc-switch:enabled .mdc-switch__track::after{background:var(--mdc-switch-selected-track-color)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color)}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color)}.mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color)}.mdc-switch:disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color)}.mdc-switch:enabled .mdc-switch__track::before{background:var(--mdc-switch-unselected-track-color)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color)}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color)}.mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color)}.mdc-switch:disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color)}.mdc-switch .mdc-switch__track{border-radius:var(--mdc-switch-track-shape)}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation-shadow)}.mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation-shadow)}.mat-mdc-slide-toggle .mdc-label{font-family:var(--mat-slide-toggle-label-text-font);font-size:var(--mat-slide-toggle-label-text-size);letter-spacing:var(--mat-slide-toggle-label-text-tracking);line-height:var(--mat-slide-toggle-label-text-line-height);font-weight:var(--mat-slide-toggle-label-text-weight)}.mat-mdc-slide-toggle{display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle .mdc-switch__ripple::after{content:"";opacity:0}.mat-mdc-slide-toggle .mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:opacity 75ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-mdc-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-elevation-overlay,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}.mat-mdc-slide-toggle .mdc-switch:enabled+.mdc-label{cursor:pointer}'],encapsulation:2,changeDetection:0})}}return i})();var Et=(()=>{class i{static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275mod=ge({type:i})}static{this.\u0275inj=fe({})}}return i})(),At=(()=>{class i{static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275mod=ge({type:i})}static{this.\u0275inj=fe({imports:[Et,we,Ue,x,Et,we]})}}return i})();function Jt(i,r){if(i&1){let e=k();c(0,"div",17)(1,"mat-form-field",10)(2,"mat-label"),d(3,"Auth Key"),o(),g(4,"input",18),o(),c(5,"button",19),v("click",function(){_(e);let t=I();return b(t.verify())}),d(6,"Verify"),o()()}}function ei(i,r){if(i&1&&(c(0,"mat-option",20),d(1),o()),i&2){let e=r.$implicit;s("value",e),l(),q(" ",e," ")}}function ti(i,r){if(i&1&&(c(0,"mat-option",20),d(1),o()),i&2){let e=r.$implicit;s("value",e),l(),q(" ",e," ")}}function ii(i,r){if(i&1&&(c(0,"div",28)(1,"div",29),d(2),o(),c(3,"div",30)(4,"mat-form-field",10)(5,"mat-label"),d(6,"Tally Variable"),o(),g(7,"input",11),c(8,"mat-autocomplete",null,2),u(10,ti,2,2,"mat-option",12),o()()()()),i&2){let e=r.$implicit,a=S(9),t=I(3);l(2),q(" ",e," "),l(5),s("formControl",t.tallyControl)("matAutocomplete",a),l(3),s("ngForOf",t.tallyVariables)}}function ai(i,r){if(i&1&&(c(0,"div",22)(1,"div",23)(2,"div",24),d(3,"Campaign Variable"),o(),c(4,"div",25),d(5,"Tally Variables"),o()(),c(6,"div",26),u(7,ii,11,4,"div",27),o()()),i&2){let e=I(2);l(7),s("ngForOf",e.campaignFields)}}function ci(i,r){if(i&1&&($(0),u(1,ai,8,1,"div",21),L()),i&2){let e=r.ngIf;I();let a=S(25);l(),s("ngIf",e.length>0)("ngIfElse",a)}}function oi(i,r){i&1&&(c(0,"p",32),d(1,"No variables found for this campaign."),o())}function ni(i,r){if(i&1&&u(0,oi,2,0,"p",31),i&2){let e=I();s("ngIf",e.campaignSelectedOnce)}}function ri(i,r){if(i&1){let e=k();c(0,"button",33),v("click",function(){_(e);let t=I();return b(t.saveConfiguration())}),d(1," Save"),o()}if(i&2){let e,a=I();s("disabled",!((e=a.auth.get("useCustomAuth"))!=null&&e.value)&&!a.hasDefaultAuthkey)}}var Dt=class i extends ne{constructor(e){super();this.store=e;this.userData$=this.store.pipe(P(dt),V(O),y(this.destroy$)),this.get$=this.store.pipe(P(pt),V(O),y(this.destroy$)),this.getCampaign$=this.store.pipe(P(mt),V(O),y(this.destroy$)),this.getCampaignField$=this.store.pipe(P(ht),V(O),y(this.destroy$))}get$;getCampaign$;getCampaignField$;userData$;fetchCampaignInProcess$=h(!1);campaignForm=new T(null,[at.required]);params;campaignFields=[];campaignSelectedOnce=!1;useCustomAuth=!1;hasDefaultAuthkey=!1;defaultAuthkey=null;campaignSelected=new w;myControl=new T("");options=["Payment","Purchase","Receipt","CreditNote","DebitNote","Invoice","Ledger"];tallyControl=new T("");tallyVariables=["tally1","tally2","tally3"];auth=new ot({authkey:new T(""),useCustomAuth:new T(!1)});ngOnInit(){this.store.dispatch(ut()),this.userData$.subscribe(e=>{let a=e?.meta;a&&a.authkey?(this.hasDefaultAuthkey=!0,this.defaultAuthkey=a.authkey,this.auth.patchValue({authkey:this.defaultAuthkey,useCustomAuth:!1}),this.fetchCampaignFields(a.authkey)):(this.hasDefaultAuthkey=!1,this.defaultAuthkey=null,this.auth.patchValue({authkey:"",useCustomAuth:!0}))}),this.auth.get("useCustomAuth")?.valueChanges.subscribe(e=>{!e&&this.defaultAuthkey&&(this.auth.patchValue({authkey:this.defaultAuthkey}),this.fetchCampaignFields(this.defaultAuthkey)),this.campaignFields=[],this.campaignSelectedOnce=!1,this.campaignForm.setValue(""),this.myControl.setValue(""),this.tallyControl.setValue("")}),this.auth.get("authkey")?.valueChanges.subscribe(()=>{this.campaignForm.setValue("")}),this.getCampaignField$.pipe(y(this.destroy$)).subscribe(e=>{e?.variables?.length>0&&(this.campaignFields=Array.isArray(e.variables)?e.variables:[])})}fetchCampaignFields(e){this.store.dispatch(ve({authkey:e}))}get authkey(){return this.auth.get("authkey")?.value??""}onCampaignSelected(e){!e?.slug||!this.authkey||(this.campaignFields=[],this.campaignSelectedOnce=!0,this.store.dispatch(ve({slug:e.slug,sync:!0,authkey:this.authkey})))}verify(){let e=this.auth.get("authkey")?.value??"";this.store.dispatch(ft({authkey:e,param:{getAll:!0,itemsPerPage:25,pageNo:1}}))}saveConfiguration(){let e=this.campaignForm.value,a=this.myControl.value,t={campaign:e,voucherType:a}}static \u0275fac=function(a){return new(a||i)(f(Q))};static \u0275cmp=C({type:i,selectors:[["app-configuration"]],outputs:{campaignSelected:"campaignSelected"},features:[B([]),M],decls:28,vars:10,consts:[["auto","matAutocomplete"],["noVariables",""],["tally","matAutocomplete"],[3,"expanded"],["appearance","outlined",1,"responsive-card"],[3,"formGroup"],[1,"mb-3"],["formControlName","useCustomAuth","color","primary"],["class","d-flex flex-row gap-4 align-items-baseline",4,"ngIf"],[1,"example-form"],["appearance","outline",1,"w-25"],["type","text","placeholder","Pick one","matInput","",3,"formControl","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"fetchCampaignInProgressEmit","campaignSelected","campaignForm","authkey"],[4,"ngIf"],[1,"d-flex","justify-content-end"],["mat-flat-button","","color","primary",3,"disabled","click",4,"ngIf"],[1,"d-flex","flex-row","gap-4","align-items-baseline"],["matInput","","placeholder","Enter Your Auth Key","formControlName","authkey"],["mat-flat-button","","color","primary",3,"click"],[3,"value"],["class","mt-4",4,"ngIf","ngIfElse"],[1,"mt-4"],[1,"d-flex","flex-row","gap-8"],[1,"mb-2","font-12","fw-bolder","variable"],[1,"mb-2","font-12","fw-bolder"],[1,"d-flex","flex-column","gap-4"],["class","d-flex justify-content-between gap-7",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","gap-7"],[1,"ml-4","fw-bold","variable"],[1,"tally-variable","flex-grow-1"],["class","text-muted font-14 mt-3 ml-5",4,"ngIf"],[1,"text-muted","font-14","mt-3","ml-5"],["mat-flat-button","","color","primary",3,"click","disabled"]],template:function(a,t){if(a&1){let n=k();c(0,"mat-accordion")(1,"mat-expansion-panel",3)(2,"mat-expansion-panel-header")(3,"mat-panel-description")(4,"p"),d(5,"Use Custom Msg91 Account"),o()()(),c(6,"mat-card",4)(7,"mat-card-content")(8,"form",5)(9,"mat-card-header",6)(10,"mat-card-title")(11,"mat-slide-toggle",7),d(12," Use Custom Auth Key "),o()()(),u(13,Jt,7,0,"div",8),o(),c(14,"form",9)(15,"mat-form-field",10)(16,"mat-label"),d(17,"Voucher Type"),o(),g(18,"input",11),c(19,"mat-autocomplete",null,0),u(21,ei,2,2,"mat-option",12),o()()(),c(22,"app-campaign-autocomplete",13),v("fetchCampaignInProgressEmit",function(p){return _(n),b(t.fetchCampaignInProcess$=p)})("campaignSelected",function(p){return _(n),b(t.onCampaignSelected(p))}),o(),u(23,ci,2,2,"ng-container",14)(24,ni,1,1,"ng-template",null,1,Re),o(),c(26,"mat-card-actions",15),u(27,ri,2,1,"button",16),o()()()()}if(a&2){let n,m=S(20);l(),s("expanded",!0),l(7),s("formGroup",t.auth),l(5),s("ngIf",((n=t.auth.get("useCustomAuth"))==null?null:n.value)||!t.hasDefaultAuthkey),l(5),s("formControl",t.myControl)("matAutocomplete",m),l(3),s("ngForOf",t.options),l(),s("campaignForm",t.campaignForm)("authkey",t.authkey),l(),s("ngIf",t.campaignFields),l(4),s("ngIf",t.campaignFields&&t.campaignFields.length>0)}},dependencies:[ae,ie,te,oe,ce,x,U,D,It,kt,vt,yt,Ct,W,Ke,ee,rt,H,Y,ct,Z,st,lt,de,se,K,le,J,nt,pe,St,tt,He,Je,Ze,et,Ye,At,Ce],styles:[".variable[_ngcontent-%COMP%]{min-width:200px}"]})};export{Dt as ConfigurationComponent};

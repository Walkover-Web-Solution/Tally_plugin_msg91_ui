import{a as G,b as j,d as D,e as q,f as K,j as Q,k as X,l as Y,m as Z,n as ee,o as te,p as ie,q as re,r as ne}from"./chunk-FWJF7KS6.js";import{A as J,m as I,n as d,t as U,u as W,v as z,x as H}from"./chunk-U6MDFKLO.js";import{a as R,b as l,d as T,e as P,f as x,h as f,i as $,j as k,k as L,l as A,m as B}from"./chunk-DVJ7NMNS.js";import"./chunk-E7BWQVEW.js";import{Da as _,Eb as S,Ha as M,Hb as F,Ib as N,La as c,Pa as s,Ta as n,Tb as V,Ua as e,Va as u,Wa as O,Ya as g,Za as v,ea as E,fa as w,hb as o,nb as b,ob as h,za as p}from"./chunk-VXYVYTUS.js";function ae(i,r){i&1&&(n(0,"mat-error"),o(1," Only alphabets are allowed "),e())}function me(i,r){i&1&&(n(0,"mat-error"),o(1," Only alphabets are allowed "),e())}function le(i,r){i&1&&(n(0,"mat-error"),o(1," Invalid email format "),e())}function pe(i,r){i&1&&(n(0,"p"),o(1,"OTP Verified!"),e())}function se(i,r){i&1&&(n(0,"p"),o(1,"OTP Verification Failed"),e())}function ce(i,r){if(i&1){let t=O();n(0,"div")(1,"mat-form-field",16)(2,"mat-label"),o(3,"Enter OTP"),e(),u(4,"input",17),e(),n(5,"button",18),g("click",function(){E(t);let m=v();return w(m.verifyOtp())}),o(6,"Verify OTP"),e(),c(7,pe,2,0,"p",9),b(8,"async"),c(9,se,2,0,"p",9),b(10,"async"),e()}if(i&2){let t=v();p(7),s("ngIf",h(8,2,t.otpVerified$)),p(2),s("ngIf",h(10,4,t.otpNotVerified$))}}var oe=class i{constructor(r,t){this.store=r;this.router=t;this.otpVerified$=this.store.pipe(d(G)),this.registerUser$=this.store.pipe(d(D)),this.walletbalance$=this.store.pipe(d(q)),this.otpNotVerified$=this.store.pipe(d(j))}otpSent=!1;otpVerified=!1;balance=0;otpVerified$;otpNotVerified$;registerUser$;walletbalance$;registrationForm=new x({user:new x({fname:new f("",[l.required,l.minLength(3),l.maxLength(24)]),lname:new f("",[l.minLength(3),l.maxLength(25)]),email:new f("",[l.required]),mobile:new f("",[l.required]),otp:new f("",[l.minLength(4),l.maxLength(4)])})});sendotp(){let r=this.registrationForm.get("user.mobile")?.value??"";r&&(this.store.dispatch(U({mobile:r})),this.otpSent=!0)}verifyOtp(){let r=this.registrationForm.get("user.mobile")?.value??"",t=this.registrationForm.get("user.otp")?.value??"";!t||t.length!==4||(this.store.dispatch(W({request:{mobile:r,otp:t}})),this.store.dispatch(z({response:{success:!0}})),this.otpVerified$.subscribe(a=>{}))}submit(){let r=this.registrationForm.get("user.fname")?.value??"",t=this.registrationForm.get("user.email")?.value??"",a=this.registrationForm.get("user.mobile")?.value??"";this.store.dispatch(H({name:r,email:t,mobile:a})),this.registerUser$.subscribe(m=>{m&&(this.router.navigate(["/layout/logs"]),this.store.dispatch(J()))}),this.walletbalance$.subscribe(m=>{m&&m.balance&&(this.balance=m.balance)})}static \u0275fac=function(t){return new(t||i)(_(I),_(V))};static \u0275cmp=M({type:i,selectors:[["app-register"]],decls:34,vars:8,consts:[[1,"d-flex","justify-content-center","align-items-center"],[1,"outline-card","reg-form"],[1,"d-flex","align-items-center","justify-content-center"],[1,"app-content","d-flex","justify-content-center","align-items-center"],[3,"formGroup"],["formGroupName","user"],[1,"d-flex","gap-3"],["appearance","outline",1,"w-100"],["matInput","","formControlName","fname","placeholder","Enter First Name"],[4,"ngIf"],["matInput","","formControlName","lname","placeholder","Enter Last Name"],["matInput","","formControlName","email","placeholder","Enter Email"],[1,"input-wrapper","d-flex","gap-3"],["matInput","","type","tel","formControlName","mobile","placeholder","Enter Mobile"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","type","submit",3,"click","disabled"],["appearance","outline",1,"input-wrapper","w-100"],["matInput","","formControlName","otp","placeholder","Enter OTP"],["mat-button","",3,"click"]],template:function(t,a){if(t&1&&(n(0,"div",0)(1,"mat-card",1)(2,"h2",2),o(3,"Register"),e(),n(4,"div",3)(5,"form",4)(6,"div",5)(7,"div",6)(8,"mat-form-field",7)(9,"mat-label"),o(10,"First Name"),e(),u(11,"input",8),c(12,ae,2,0,"mat-error",9),e(),n(13,"mat-form-field",7)(14,"mat-label"),o(15,"Last Name"),e(),u(16,"input",10),c(17,me,2,0,"mat-error",9),e(),n(18,"mat-form-field",7)(19,"mat-label"),o(20,"Email"),e(),u(21,"input",11),c(22,le,2,0,"mat-error",9),e()(),n(23,"div",12)(24,"mat-form-field",7)(25,"mat-label"),o(26,"Mobile"),e(),u(27,"input",13),e(),n(28,"button",14),g("click",function(){return a.sendotp()}),o(29,"Send"),e()(),c(30,ce,11,6,"div",9),n(31,"button",15),b(32,"async"),g("click",function(){return a.submit()}),o(33,"Submit"),e()()()()()()),t&2){let m,C,y;p(5),s("formGroup",a.registrationForm),p(7),s("ngIf",(m=a.registrationForm.get("user.fname"))==null?null:m.hasError("pattern")),p(5),s("ngIf",(C=a.registrationForm.get("user.lname"))==null?null:C.hasError("pattern")),p(5),s("ngIf",(y=a.registrationForm.get("user.email"))==null?null:y.hasError("pattern")),p(8),s("ngIf",a.otpSent),p(),s("disabled",!h(32,6,a.otpVerified$))}},dependencies:[ie,te,Z,ee,N,S,F,B,$,R,T,P,k,A,L,ne,re,Q,K,Y,X],styles:[".app-content[_ngcontent-%COMP%]{background-color:var(--color-common-app-bg);height:100vh}button[_ngcontent-%COMP%]{font-size:16px;width:100px}.reg-form[_ngcontent-%COMP%]{min-width:750px;background-color:#ffffffb8;box-shadow:#fff;height:400px;width:400px;margin-top:60px}.input-wrapper[_ngcontent-%COMP%]{width:60%}@media (max-width: 768px){.reg-form[_ngcontent-%COMP%]{min-width:80%}.reg-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{flex-direction:column}}"]})};export{oe as RegisterComponent};

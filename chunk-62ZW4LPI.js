import{e as Q,h as W,i as X}from"./chunk-QMTQQBOC.js";import{a as j,d as T,e as z,f as H,g as J}from"./chunk-DFGKABVO.js";import{f as N}from"./chunk-ZBFM5A7G.js";import{c as E}from"./chunk-SE3VEQTT.js";import{a as l,b as K}from"./chunk-CIOCNEJN.js";import"./chunk-BYUUP24I.js";import"./chunk-DYV4KVQS.js";import"./chunk-663WTBCT.js";import{E as k,F as G,G as L,H as q,b as I,c as u,e as A,f as D,g as c,j as i,k as x,m as O,o as P,q as U,r as V}from"./chunk-SSU4MBWM.js";import{F as B,I as R,L as _,m as w,n}from"./chunk-A52KVOWL.js";import{$a as C,Ga as f,Jb as p,Mb as S,Q as r,Sa as h,Wa as b,cb as y,da as t,kb as F,qb as m,rb as o,s as g,sb as s,sc as $,tb as v,ub as M}from"./chunk-W5V45PS6.js";var Y=class d extends K{constructor(e){super();this.store=e;this.userData$=this.store.pipe(n(k),r(l),t(this.destroy$)),this.get$=this.store.pipe(n(L),r(l),t(this.destroy$)),this.getCampaign$=this.store.pipe(n(G),r(l),t(this.destroy$)),this.getCampaignField$=this.store.pipe(n(q),r(l),t(this.destroy$))}userData$;get$;getCampaign$;getCampaignField$;fetchCampaignInProcess$=g(!1);campaignForm=new i(null,[u.required]);params;campaignFields=[];campaignSelectedOnce=!1;campaignSelected=new f;userForm=new c({name:new i("",[u.required]),mobile:new i({value:"",disabled:!0}),email:new i({value:"",disabled:!0})});myControl=new i("");options=["Payment","Purchase","Receipt","CreditNote","DebitNote","Invoice","Ledger"];tallyControl=new i("");tallyVariables=["customer_name","total_due","attachments","voucherdate","contactperson","address","state","pincode","phone","mobile","fax","email"];auth=new c({authkey:new i("")});ngOnInit(){this.userData$.pipe(t(this.destroy$)).subscribe(e=>{e&&(this.userForm.get("name")?.setValue(e?.name),this.userForm.get("email")?.setValue(e?.email),this.userForm.get("mobile")?.setValue(e?.mobile?e.mobile:"--Not Provided--"))}),this.store.dispatch(B()),this.auth.get("authkey")?.valueChanges.pipe(r(),t(this.destroy$)).subscribe(e=>{if(e&&e.trim().length>10){let a={getAll:!0,itemsPerPage:25,pageNo:1};this.store.dispatch(R({authkey:e,param:a}))}}),this.getCampaignField$.pipe(t(this.destroy$)).subscribe(e=>{e?.variables?.length>0&&(this.campaignFields=Array.isArray(e.variables)?e.variables:[])})}get authkey(){return this.auth.get("authkey")?.value??""}onCampaignSelected(e){!e?.slug||!this.authkey||(this.campaignFields=[],this.campaignSelectedOnce=!0,this.store.dispatch(_({slug:e.slug,sync:!0,authkey:this.authkey})))}static \u0275fac=function(a){return new(a||d)(b(w))};static \u0275cmp=C({type:d,selectors:[["app-user-log"]],outputs:{campaignSelected:"campaignSelected"},features:[S([]),y],decls:15,vars:1,consts:[[3,"formGroup"],[1,"d-flex","flex-column","mt-3"],["appearance","outline",1,"w-25"],["matInput","","placeholder","Enter name","formControlName","name"],["matInput","","placeholder","Enter email","formControlName","email"],["matInput","","placeholder","mobile number","formControlName","mobile"]],template:function(a,Z){a&1&&(v(0),m(1,"form",0)(2,"div",1)(3,"mat-form-field",2)(4,"mat-label"),p(5,"name"),o(),s(6,"input",3),o(),m(7,"mat-form-field",2)(8,"mat-label"),p(9,"email"),o(),s(10,"input",4),o(),m(11,"mat-form-field",2)(12,"mat-label"),p(13,"mobile"),o(),s(14,"input",5),o()()(),M()),a&2&&(h(),F("formGroup",Z.userForm))},dependencies:[z,T,j,J,H,$,Q,E,V,x,I,A,D,O,P,W,U,X,N],encapsulation:2})};export{Y as UserLogComponent};

import './polyfills.server.mjs';
import{a as D,b as q,d as U,e as W,f as X,j as Y,k as Z,l as ee,m as te,n as ie,o as re,p as ne}from"./chunk-BIOVS63X.mjs";import{A as Q,m as V,n as d,t as z,u as H,v as J,x as K}from"./chunk-VQJ2TVA6.mjs";import{a as R,b as P}from"./chunk-ZG7CDIY2.mjs";import{a as k,b as m,d as $,e as L,f as h,h as f,i as T,j as A,k as G,l as j,m as B}from"./chunk-D5EHBLBF.mjs";import"./chunk-7YAXKM4Z.mjs";import{$a as e,Da as s,Ha as b,La as y,Pa as u,Wa as p,_a as r,ab as c,ac as O,bb as E,da as x,db as g,dc as S,ea as C,eb as w,ec as N,ob as n,ub as M,vb as F,yc as I}from"./chunk-U6Q3RMWP.mjs";import"./chunk-2HPRMWJ4.mjs";function ae(l,t){l&1&&(r(0,"mat-error"),n(1," Only alphabets are allowed "),e())}function le(l,t){l&1&&(r(0,"mat-error"),n(1," Only alphabets are allowed "),e())}function me(l,t){l&1&&(r(0,"mat-error"),n(1," Invalid email format "),e())}function se(l,t){if(l&1){let i=E();r(0,"div",20)(1,"mat-form-field",10)(2,"mat-label"),n(3,"Enter OTP"),e(),c(4,"input",21),e(),r(5,"button",22),g("click",function(){x(i);let a=w();return C(a.verifyOtp())}),n(6,"Verify"),e()()}}var oe=class l{constructor(t,i){this.store=t;this.router=i;this.otpVerified$=this.store.pipe(d(D)),this.registerUser$=this.store.pipe(d(U)),this.walletbalance$=this.store.pipe(d(W)),this.otpNotVerified$=this.store.pipe(d(q))}otpSent=!1;otpVerified=!1;balance=0;otpVerified$;otpNotVerified$;registerUser$;walletbalance$;registrationForm=new h({user:new h({fname:new f("",[m.required,m.minLength(3),m.maxLength(24)]),lname:new f("",[m.minLength(3),m.maxLength(25)]),email:new f("",[m.required]),mobile:new f("",[m.required]),otp:new f("",[m.minLength(4),m.maxLength(4)])})});sendotp(){let t=this.registrationForm.get("user.mobile")?.value??"";t&&(this.store.dispatch(z({mobile:t})),this.otpSent=!0)}verifyOtp(){let t=this.registrationForm.get("user.mobile")?.value??"",i=this.registrationForm.get("user.otp")?.value??"";!i||i.length!==4||(this.store.dispatch(H({request:{mobile:t,otp:i}})),this.store.dispatch(J({response:{success:!0}})),this.otpVerified$.subscribe(o=>{}))}submit(){let t=this.registrationForm.get("user.fname")?.value??"",i=this.registrationForm.get("user.email")?.value??"",o=this.registrationForm.get("user.mobile")?.value??"";this.store.dispatch(K({name:t,email:i,mobile:o})),this.registerUser$.subscribe(a=>{a&&(this.router.navigate(["/layout/logs"]),this.store.dispatch(Q()))}),this.walletbalance$.subscribe(a=>{a&&a.balance&&(this.balance=a.balance)})}static \u0275fac=function(i){return new(i||l)(b(V),b(I))};static \u0275cmp=y({type:l,selectors:[["app-register"]],decls:36,vars:8,consts:[[1,"d-flex","justify-content-center","align-items-center"],[1,"outline-card","reg-form"],[1,"d-flex","align-items-center","justify-content-center"],[1,"app-content","d-flex","justify-content-center","align-items-center"],[3,"formGroup"],["formGroupName","user"],[1,"d-flex","gap-2","flex-column"],["appearance","outline","color","primary",1,"w-100"],["matInput","","formControlName","fname","placeholder","Enter First Name"],[4,"ngIf"],[1,"w-100"],["matInput","","formControlName","lname","placeholder","Enter Last Name"],["matInput","","formControlName","email","placeholder","Enter Email"],[1,"d-flex","flex-column","gap-2",2,"width","250px"],[1,"input-wrapper","d-flex","gap-3"],["matInput","","type","tel","formControlName","mobile","placeholder","Enter Mobile"],["mat-flat-button","",3,"click"],["class","d-flex flex-column mt-2",4,"ngIf"],[1,"mt-4"],["mat-raised-button","","type","submit",3,"click","disabled"],[1,"d-flex","flex-column","mt-2"],["matInput","","formControlName","otp","placeholder","Enter OTP"],["mat-button","",3,"click"]],template:function(i,o){if(i&1&&(r(0,"div",0)(1,"mat-card",1)(2,"h2",2),n(3,"Login/Register Form"),e(),r(4,"div",3)(5,"form",4)(6,"div",5)(7,"div",6)(8,"mat-form-field",7)(9,"mat-label"),n(10,"First Name"),e(),c(11,"input",8),u(12,ae,2,0,"mat-error",9),e(),r(13,"mat-form-field",10)(14,"mat-label"),n(15,"Last Name"),e(),c(16,"input",11),u(17,le,2,0,"mat-error",9),e(),r(18,"mat-form-field",10)(19,"mat-label"),n(20,"Email"),e(),c(21,"input",12),u(22,me,2,0,"mat-error",9),e()(),r(23,"div",13)(24,"div",14)(25,"mat-form-field",10)(26,"mat-label"),n(27,"Mobile"),e(),c(28,"input",15),e()(),r(29,"button",16),g("click",function(){return o.sendotp()}),n(30,"Send"),e(),u(31,se,7,0,"div",17),e(),r(32,"div",18)(33,"button",19),M(34,"async"),g("click",function(){return o.submit()}),n(35,"Submit"),e()()()()()()()),i&2){let a,_,v;s(5),p("formGroup",o.registrationForm),s(7),p("ngIf",(a=o.registrationForm.get("user.fname"))==null?null:a.hasError("pattern")),s(5),p("ngIf",(_=o.registrationForm.get("user.lname"))==null?null:_.hasError("pattern")),s(5),p("ngIf",(v=o.registrationForm.get("user.email"))==null?null:v.hasError("pattern")),s(9),p("ngIf",o.otpSent),s(2),p("disabled",!F(34,6,o.otpVerified$))}},dependencies:[ie,te,Z,ee,N,O,S,B,T,k,$,L,A,j,G,ne,re,Y,X,P,R],styles:["body[_ngcontent-%COMP%]{height:100vh;margin:0;background-color:#7fffd4}.app-content[_ngcontent-%COMP%]{background-color:#fff}button[_ngcontent-%COMP%]{font-size:16px;width:100px}.reg-form[_ngcontent-%COMP%]{min-width:520px;background-color:#fff;box-shadow:#fff;height:640px;width:300px;margin-top:30px}.field[_ngcontent-%COMP%]{display:flex;flex-direction:column}.input-wrapper[_ngcontent-%COMP%]{width:100%}@media (max-width: 768px){.reg-form[_ngcontent-%COMP%]{min-width:80%}.reg-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{flex-direction:column}}"]})};export{oe as RegisterComponent};

import{a as Y}from"./chunk-UOG7XHUG.js";import{a as K}from"./chunk-A52KVOWL.js";import{$ as F,I as f,M as A,Q as T,S as D,Wb as R,a as l,ac as B,b as q,ca as j,da as u,e as P,ea as d,fa as M,g as O,ia as g,j as w,l as y,la as H,m,n as v,na as b,o as h,p as k,q as z,s as I,t as E,u as $,x as L,y as C}from"./chunk-W5V45PS6.js";function Z(){return n=>new O(s=>{let e,t,o=new P;return o.add(n.subscribe({complete:()=>{e&&s.next(t),s.complete()},error:r=>{s.error(r)},next:r=>{t=r,e||(e=m.schedule(()=>{s.next(t),e=void 0}),o.add(e))}})),o})}function W(n){return typeof n.ngrxOnStoreInit=="function"}function G(n){return typeof n.ngrxOnStateInit=="function"}var _=new H("@ngrx/component-store Initial State"),N=(()=>{class n{constructor(e){this.destroySubject$=new y(1),this.destroy$=this.destroySubject$.asObservable(),this.stateSubject$=new y(1),this.isInitialized=!1,this.state$=this.select(t=>t),this.state=K(this.stateSubject$.pipe(u(this.destroy$)),{requireSync:!1,manualCleanup:!0}),this.\u0275hasProvider=!1,e&&this.initState(e),this.checkProviderForHooks()}ngOnDestroy(){this.stateSubject$.complete(),this.destroySubject$.next()}updater(e){return t=>{let o=!0,r,i=($(t)?t:I(t)).pipe(k(v),d(()=>this.assertStateIsInitialized()),M(this.stateSubject$),L(([a,p])=>e(p,a)),d(a=>this.stateSubject$.next(a)),f(a=>o?(r=a,h):E(a)),u(this.destroy$)).subscribe();if(r)throw r;return o=!1,i}}initState(e){z([e],v).subscribe(t=>{this.isInitialized=!0,this.stateSubject$.next(t)})}setState(e){typeof e!="function"?this.initState(e):this.updater(e)()}patchState(e){let t=typeof e=="function"?e(this.get()):e;this.updater((o,r)=>l(l({},o),r))(t)}get(e){this.assertStateIsInitialized();let t;return this.stateSubject$.pipe(A(1)).subscribe(o=>{t=e?e(o):o}),t}select(...e){let{observablesOrSelectorsObject:t,projector:o,config:r}=U(e);return(ee(t,o)?this.stateSubject$:C(t)).pipe(r.debounce?Z():J(),o?L(i=>t.length>0&&Array.isArray(i)?o(...i):o(i)):J(),T(r.equal),F({refCount:!0,bufferSize:1}),u(this.destroy$))}selectSignal(...e){let t=[...e],o=(p,S)=>p===S,r=typeof t[e.length-1]=="object"?{equal:t.pop().equal||o}:{equal:o},c=t.pop(),i=t,a=i.length===0?()=>c(this.state()):()=>{let p=i.map(S=>S());return c(...p)};return B(a,r)}effect(e){let t=new w;return e(t).pipe(u(this.destroy$)).subscribe(),o=>($(o)?o:I(o)).pipe(u(this.destroy$)).subscribe(c=>{t.next(c)})}checkProviderForHooks(){m.schedule(()=>{if(R()&&(W(this)||G(this))&&!this.\u0275hasProvider){let e=[W(this)?"OnStoreInit":"",G(this)?"OnStateInit":""].filter(t=>t);console.warn(`@ngrx/component-store: ${this.constructor.name} has the ${e.join(" and ")} lifecycle hook(s) implemented without being provided using the provideComponentStore(${this.constructor.name}) function. To resolve this, provide the component store via provideComponentStore(${this.constructor.name})`)}})}assertStateIsInitialized(){if(!this.isInitialized)throw new Error(`${this.constructor.name} has not been initialized yet. Please make sure it is initialized before updating/getting.`)}static{this.\u0275fac=function(t){return new(t||n)(b(_,8))}}static{this.\u0275prov=g({token:n,factory:n.\u0275fac})}}return n})();function U(n){let s=Array.from(n),t={debounce:!1,equal:(c,i)=>c===i};if(V(s[s.length-1])&&(t=l(l({},t),s.pop())),s.length===1&&typeof s[0]!="function")return{observablesOrSelectorsObject:s[0],projector:void 0,config:t};let o=s.pop();return{observablesOrSelectorsObject:s,projector:o,config:t}}function V(n){let s=n;return typeof s.debounce<"u"||typeof s.equal<"u"}function ee(n,s){return Array.isArray(n)&&n.length===0&&s}function J(){return n=>n}function x(n,s,e){let t=typeof n=="function"?{next:n,error:s,complete:e}:n;return o=>o.pipe(d({next:t.next,complete:t.complete}),f(r=>(t.error(r),h)),t.finalize?D(t.finalize):r=>r)}var Q=class n extends N{constructor(e){super({logs:null,logsLoading:!1,reqLogs:null,reqLogsInProcess:!1});this.logsService=e}logsData$=this.select(e=>e.logs);isLoading$=this.select(e=>e.logsLoading);reqLogs$=this.select(e=>e.reqLogs);reqLogsInProcess$=this.select(e=>e.reqLogsInProcess);setLogs=this.updater((e,t)=>q(l({},e),{logs:t}));getLogs=this.effect(e=>e.pipe(j(t=>(this.patchState({logsLoading:!0}),this.logsService.getProxyLogs(t).pipe(x(o=>this.patchState({logs:o,logsLoading:!1}),()=>this.patchState({logs:null,logsLoading:!1})),f(()=>h))))));getLogsById=this.effect(e=>e.pipe(j(t=>(this.patchState({reqLogsInProcess:!0,reqLogs:null}),this.logsService.getProxyLogsById(t).pipe(x(o=>{this.patchState({reqLogsInProcess:!1,reqLogs:l({},o.data)})},o=>{this.patchState({reqLogsInProcess:!1})}))))));static \u0275fac=function(t){return new(t||n)(b(Y))};static \u0275prov=g({token:n,factory:n.\u0275fac})};export{Q as a};

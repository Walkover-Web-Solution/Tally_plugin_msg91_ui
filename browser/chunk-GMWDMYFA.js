import{b as R,c as be,d as ve}from"./chunk-TIZRSCLJ.js";import{a as ye}from"./chunk-XXM6P6N7.js";import{a as de,b as ge,d as ce,e as fe,f as _e,g as he}from"./chunk-DFGKABVO.js";import{a as se,f as ue}from"./chunk-ZBFM5A7G.js";import{a as W,c as X}from"./chunk-SE3VEQTT.js";import{a as Ce,b as Ee}from"./chunk-2CMOTOU4.js";import{b as G}from"./chunk-BYUUP24I.js";import"./chunk-DYV4KVQS.js";import"./chunk-663WTBCT.js";import{A as oe,b as z,c as s,e as H,f as J,g as S,j as _,k as K,m as Q,n as Y,o as Z,r as ee,t as te,u as re,v as ie,y as ne}from"./chunk-SSU4MBWM.js";import{m as D,n as f,t as le,u as ae,w as me,z as pe}from"./chunk-A52KVOWL.js";import{a as j,b as U}from"./chunk-WDOWR2HF.js";import{$a as k,Bb as w,Jb as l,Ob as L,Rb as F,Sa as m,Sb as M,Wa as E,db as g,kb as p,kc as q,mc as $,qb as i,rb as r,rc as B,sb as h,sc as A,wb as x,xa as O,ya as V,zb as c}from"./chunk-W5V45PS6.js";var Fe=t=>({"invalid-input":t});function Me(t,n){t&1&&(i(0,"mat-error"),l(1," Only alphabets are allowed "),r())}function Se(t,n){t&1&&(i(0,"mat-error"),l(1," This is a required field "),r())}function Re(t,n){t&1&&(i(0,"mat-error"),l(1," Min required length is 3 "),r())}function Ie(t,n){t&1&&(i(0,"mat-error"),l(1," Max required length is 24 "),r())}function Ne(t,n){t&1&&(i(0,"mat-error"),l(1," Only alphabets are allowed "),r())}function Pe(t,n){t&1&&(i(0,"mat-error"),l(1," Min required length is 3 "),r())}function Te(t,n){t&1&&(i(0,"mat-error"),l(1," Max required length is 24 "),r())}function Oe(t,n){t&1&&(i(0,"mat-error"),l(1," Invalid email format "),r())}function Ve(t,n){t&1&&(i(0,"mat-error"),l(1," This is a required field "),r())}function ke(t,n){t&1&&(i(0,"mat-error"),l(1,"Please enter valid mobile number"),r())}function xe(t,n){if(t&1){let a=x();i(0,"div",25)(1,"mat-form-field",26),h(2,"input",27),r(),i(3,"button",28),F(4,"async"),c("click",function(){O(a);let o=w();return V(o.verifyOtp())}),l(5,"Verify "),r()()}if(t&2){let a=w();m(3),p("msg91ButtonLoader",M(4,1,a.verifyingloading$))}}var we=class t{constructor(n,a){this.store=n;this.router=a;this.otpVerified$=this.store.pipe(f(te)),this.registerUser$=this.store.pipe(f(ne)),this.walletbalance$=this.store.pipe(f(oe)),this.otpNotVerified$=this.store.pipe(f(ie)),this.verifyingloading$=this.store.pipe(f(re))}otpSent=!1;otpVerified=!1;balance=0;otpVerified$;otpNotVerified$;registerUser$;walletbalance$;intlPhone;verifyingloading$;ngAfterViewInit(){setTimeout(()=>{this.initIntl()},100)}registrationForm=new S({user:new S({fname:new _("",[s.required,s.pattern(R),s.minLength(3),s.maxLength(24)]),lname:new _("",[s.pattern(R),s.minLength(3),s.maxLength(25)]),email:new _("",[s.required,s.pattern(be)]),mobile:new _("",[s.required]),otp:new _("",[s.minLength(4),s.maxLength(4)])})});initIntl(){let n=document.querySelector("app-root")?.shadowRoot,a=document?.getElementById("mobile-input-wrapper"),e="assets/util/intl-tel-input-custom.css";a&&(this.intlPhone=new ve(a,n,e,!0))}sendotp(){let n=this.registrationForm.get("user.mobile")?.value??"";n&&(this.store.dispatch(le({mobile:n})),this.otpSent=!0)}verifyOtp(){let n=this.registrationForm.get("user.mobile")?.value??"",a=this.registrationForm.get("user.otp")?.value??"";!a||a.length!==4||this.store.dispatch(ae({request:{mobile:n,otp:a}}))}submit(){let n=this.registrationForm.get("user.fname")?.value??"",a=this.registrationForm.get("user.email")?.value??"",e=this.registrationForm.get("user.mobile")?.value??"";this.store.dispatch(me({name:n,email:a,mobile:e})),this.registerUser$.subscribe(o=>{o&&(this.router.navigate(["/layout/logs"]),this.store.dispatch(pe()))}),this.walletbalance$.subscribe(o=>{o&&o.balance&&(this.balance=o.balance)})}login(){this.router.navigate(["/login"])}static \u0275fac=function(a){return new(a||t)(E(D),E(G))};static \u0275cmp=k({type:t,selectors:[["app-register"]],decls:47,vars:18,consts:[[1,"d-flex","justify-content-center","align-items-center","w-100","h-100"],["appearance","outlined",1,"outline-card","reg-form"],[1,"d-flex","align-items-center"],["matTooltip","Back","matTooltipPosition","below",1,"ml-4","cursor-pointer",3,"click"],[1,"flex-grow-1"],[1,"ml-10"],[1,"app-content","d-flex","justify-content-center","align-items-center"],[3,"formGroup"],["formGroupName","user"],[1,"d-flex","gap-3","flex-column","mt-3","input-wrapper"],["color","primary","appearance","outline",1,"w-100"],["matInput","","formControlName","fname","placeholder","Enter First Name"],[4,"ngIf"],["appearance","outline",1,"w-100"],["matInput","","formControlName","lname","placeholder","Enter Last Name"],["matInput","","formControlName","email","placeholder","Enter Email"],[1,"d-flex","flex-column","gap-3","input-wrapper"],[1,"input-wrapper","d-flex","gap-4","align-items-baseline","mt-3"],["appearance","outline",1,"w-100","position-relative","intl-phone"],["matInput","","type","tel","formControlName","mobile","placeholder","mobile number","id","mobile-input-wrapper",3,"keydown.enter","keypress","input","blur","ngClass"],[1,"position-absolute","mt-2"],["mat-flat-button","","color","primary",3,"click"],["class","d-flex gap-4 align-items-baseline",4,"ngIf"],[1,"mt-4","w-100"],["mat-flat-button","","type","submit","color","primary",1,"w-100",3,"click","disabled"],[1,"d-flex","gap-4","align-items-baseline"],["appearance","outline",1,"input-wrapper"],["matInput","","formControlName","otp","placeholder","OTP"],["mat-flat-button","","color","primary",3,"click","msg91ButtonLoader"]],template:function(a,e){if(a&1&&(i(0,"div",0)(1,"mat-card",1)(2,"div",2)(3,"div",3),c("click",function(){return e.login()}),i(4,"mat-icon"),l(5,"arrow_back"),r()(),i(6,"div",4)(7,"h2",5),l(8,"Register Form"),r()()(),i(9,"div",6)(10,"form",7)(11,"div",8)(12,"div",9)(13,"mat-form-field",10)(14,"mat-label"),l(15,"First Name"),r(),h(16,"input",11),g(17,Me,2,0,"mat-error",12)(18,Se,2,0,"mat-error",12)(19,Re,2,0,"mat-error",12)(20,Ie,2,0,"mat-error",12),r(),i(21,"mat-form-field",13)(22,"mat-label"),l(23,"Last Name"),r(),h(24,"input",14),g(25,Ne,2,0,"mat-error",12)(26,Pe,2,0,"mat-error",12),r(),g(27,Te,2,0,"mat-error",12),i(28,"mat-form-field",13)(29,"mat-label"),l(30,"Email"),r(),h(31,"input",15),g(32,Oe,2,0,"mat-error",12)(33,Ve,2,0,"mat-error",12),r()(),i(34,"div",16)(35,"div",17)(36,"mat-form-field",18)(37,"input",19),c("keydown.enter",function(){return e.intlPhone!=null&&e.intlPhone.isRequiredValidNumber?e.sendotp():null})("keypress",function(u){return e.intlPhone==null?null:e.intlPhone.onlyPhoneNumber(u)})("input",function(){let u,d;return(u=e.registrationForm.get("user.mobile"))==null||u.setValue(e.intlPhone.phoneNumber),e.intlPhone!=null&&e.intlPhone.isValidNumber||(d=e.registrationForm.get("user.mobile"))==null?null:d.setErrors({invalidNumber:!0})})("blur",function(){let u,d;return(u=e.registrationForm.get("user.mobile"))==null||u.markAsTouched(),(d=e.registrationForm.get("user.mobile"))==null?null:d.setValue(e.intlPhone==null||e.intlPhone.phoneNumber==null?null:e.intlPhone.phoneNumber.replace("+",""))}),r(),i(38,"div",20),g(39,ke,2,0,"mat-error",12),r()(),i(40,"button",21),c("click",function(){return e.sendotp()}),l(41,"Send"),r()(),g(42,xe,6,3,"div",22),r(),i(43,"div",23)(44,"button",24),F(45,"async"),c("click",function(){return e.submit()}),l(46,"Submit"),r()()()()()()()),a&2){let o,u,d,b,v,y,C,I,N,P,T;m(10),p("formGroup",e.registrationForm),m(7),p("ngIf",((o=e.registrationForm.get("user.fname"))==null?null:o.hasError("pattern"))&&((o=e.registrationForm.get("user.fname"))==null?null:o.touched)),m(),p("ngIf",((u=e.registrationForm.get("user.fname"))==null?null:u.touched)&&((u=e.registrationForm.get("user.fname"))==null?null:u.hasError("required"))),m(),p("ngIf",((d=e.registrationForm.get("user.fname"))==null?null:d.hasError("minlength"))&&((d=e.registrationForm.get("user.fname"))==null?null:d.touched)),m(),p("ngIf",((b=e.registrationForm.get("user.fname"))==null?null:b.hasError("maxlength"))&&((b=e.registrationForm.get("user.fname"))==null?null:b.touched)),m(5),p("ngIf",((v=e.registrationForm.get("user.lname"))==null?null:v.hasError("pattern"))&&((v=e.registrationForm.get("user.fname"))==null?null:v.touched)),m(),p("ngIf",((y=e.registrationForm.get("user.lname"))==null?null:y.hasError("minlength"))&&((y=e.registrationForm.get("user.lname"))==null?null:y.touched)),m(),p("ngIf",((C=e.registrationForm.get("user.lname"))==null?null:C.hasError("maxlength"))&&((C=e.registrationForm.get("user.lname"))==null?null:C.touched)),m(5),p("ngIf",(I=e.registrationForm.get("user.email"))==null?null:I.hasError("pattern")),m(),p("ngIf",(N=e.registrationForm.get("user.email"))==null?null:N.touched),m(4),p("ngClass",L(16,Fe,((P=e.registrationForm.get("user.mobile"))==null?null:P.touched)&&!(e.intlPhone!=null&&e.intlPhone.isRequiredValidNumber))),m(2),p("ngIf",((T=e.registrationForm.get("user.mobile"))==null?null:T.touched)&&e.intlPhone&&!(e.intlPhone!=null&&e.intlPhone.isRequiredValidNumber)),m(3),p("ngIf",e.otpSent),m(2),p("disabled",!M(45,14,e.otpVerified$))}},dependencies:[fe,ce,de,ge,A,q,$,B,ee,K,z,H,J,Q,Z,Y,he,_e,ue,se,X,W,ye,U,j,Ee,Ce],styles:[".app-content[_ngcontent-%COMP%]{background-color:#fff}.reg-form[_ngcontent-%COMP%]{min-width:600px;background-color:#fff;box-shadow:#fff;height:640px;width:300px;margin-top:30px}.input-wrapper[_ngcontent-%COMP%]{width:496px}.intl-phone[_ngcontent-%COMP%]{z-index:2}mat-error[_ngcontent-%COMP%]{font-weight:500}@media (max-width: 768px){.reg-form[_ngcontent-%COMP%]{min-width:80%}.reg-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{flex-direction:column}}"]})};export{we as RegisterComponent};

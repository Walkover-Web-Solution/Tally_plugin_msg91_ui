import{a as N}from"./chunk-PGL7W3XZ.js";import{$ as B,I as b,M as A,Pb as W,Q as H,S as U,Ub as M,a as l,b as O,ca as $,da as h,e as P,ea as p,fa as D,g as q,ia as g,j as _,l as v,la as F,m as x,mc as u,n as I,na as d,nc as R,o as y,oc as K,p as C,q as T,s as L,t as E,u as j,x as k,y as z}from"./chunk-H3RJLV3I.js";var m=class r{constructor(o){this.http=o}otpUrl="https://routes.msg91.com/api/117230g173934031967ac3a1f486b4/otp/send";verifyurl="https://routes.msg91.com/api/117230g173934031967ac3a1f486b4/otp/verify";registerUrl="https://routes.msg91.com/api/clientUsers?action=login";walletUrl="https://routes.msg91.com/api/proxy/117230/37kxrfv2/walletBalance";rechargeWalletUrl="https://routes.msg91.com/api/proxy/117230/37kxrfv2/rechargeWallet";existingurl="https://routes.msg91.com/api/117230g173934031967ac3a1f486b4/otp/verify?action=login";getLogs="https://routes.msg91.com/api/c/proxyLogs";getLogsById="https://apitest.msg91.com/api/c/proxyLogDetails/:id";getProxyLogs(o){let t=new R({fromObject:o||{}});return this.http.get(this.getLogs,{params:t})}getProxyLogsById(o){let t=this.getLogsById.replace(":id",o);return this.http.get(t)}sendOtp(o){let t=new u({"Content-Type":"application/json",authkey:"dbc2b79e90d5ee493948fcf6556c2c9a"}),e={mobile:o};return this.http.post(this.otpUrl,e,{headers:t})}verfiyOtp(o,t){let e=new u({"Content-Type":"application/json",authkey:"dbc2b79e90d5ee493948fcf6556c2c9a"}),n={mobile:o,otp:t};return this.http.post(this.verifyurl,n,{headers:e})}existinguser(o,t){let e=new u({"Content-Type":"application/json",authkey:"dbc2b79e90d5ee493948fcf6556c2c9a"}),s={mobile:o.startsWith("+")?o.slice(1):o,otp:t};return this.http.post(this.existingurl,s,{headers:e}).pipe(p(a=>{let i=a?.data?.proxy_auth_token;i&&(localStorage.setItem("proxy_auth_token",i),sessionStorage.setItem("proxy_auth_token",i))}))}registerUser(o,t,e){let n=new u({"Content-Type":"application/json",authkey:"dbc2b79e90d5ee493948fcf6556c2c9a"}),s={name:o,email:t,mobile:e,feature_id:"117230g173934031967ac3a1f486b4"};return this.http.post(this.registerUrl,s,{headers:n}).pipe(p(a=>{let i=a?.data?.proxy_auth_token;i&&(localStorage.setItem("proxy_auth_token",i),sessionStorage.setItem("proxy_auth_token",i))}))}getWalletBalance(){let o=this.getAuthToken(),t=new u({"Content-Type":"application/json",proxy_auth_token:o});return this.http.get(this.walletUrl,{headers:t}).pipe()}rechargeWallet(o){let t=this.getAuthToken(),e=new u({"Content-Type":"application/json",proxy_auth_token:t}),n={amount:o};return this.http.post(this.rechargeWalletUrl,n,{headers:e})}getAuthToken(){return typeof window<"u"&&(sessionStorage.getItem("proxy_auth_token")||localStorage.getItem("proxy_auth_token"))||null}static \u0275fac=function(t){return new(t||r)(d(K))};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})};function tt(){return r=>new q(o=>{let t,e,n=new P;return n.add(r.subscribe({complete:()=>{t&&o.next(e),o.complete()},error:s=>{o.error(s)},next:s=>{e=s,t||(t=x.schedule(()=>{o.next(e),t=void 0}),n.add(t))}})),n})}function G(r){return typeof r.ngrxOnStoreInit=="function"}function J(r){return typeof r.ngrxOnStateInit=="function"}var et=new F("@ngrx/component-store Initial State"),X=(()=>{class r{constructor(t){this.destroySubject$=new v(1),this.destroy$=this.destroySubject$.asObservable(),this.stateSubject$=new v(1),this.isInitialized=!1,this.state$=this.select(e=>e),this.state=N(this.stateSubject$.pipe(h(this.destroy$)),{requireSync:!1,manualCleanup:!0}),this.\u0275hasProvider=!1,t&&this.initState(t),this.checkProviderForHooks()}ngOnDestroy(){this.stateSubject$.complete(),this.destroySubject$.next()}updater(t){return e=>{let n=!0,s,i=(j(e)?e:L(e)).pipe(C(I),p(()=>this.assertStateIsInitialized()),D(this.stateSubject$),k(([c,f])=>t(f,c)),p(c=>this.stateSubject$.next(c)),b(c=>n?(s=c,y):E(c)),h(this.destroy$)).subscribe();if(s)throw s;return n=!1,i}}initState(t){T([t],I).subscribe(e=>{this.isInitialized=!0,this.stateSubject$.next(e)})}setState(t){typeof t!="function"?this.initState(t):this.updater(t)()}patchState(t){let e=typeof t=="function"?t(this.get()):t;this.updater((n,s)=>l(l({},n),s))(e)}get(t){this.assertStateIsInitialized();let e;return this.stateSubject$.pipe(A(1)).subscribe(n=>{e=t?t(n):n}),e}select(...t){let{observablesOrSelectorsObject:e,projector:n,config:s}=ot(t);return(rt(e,n)?this.stateSubject$:z(e)).pipe(s.debounce?tt():Q(),n?k(i=>e.length>0&&Array.isArray(i)?n(...i):n(i)):Q(),H(s.equal),B({refCount:!0,bufferSize:1}),h(this.destroy$))}selectSignal(...t){let e=[...t],n=(f,S)=>f===S,s=typeof e[t.length-1]=="object"?{equal:e.pop().equal||n}:{equal:n},a=e.pop(),i=e,c=i.length===0?()=>a(this.state()):()=>{let f=i.map(S=>S());return a(...f)};return M(c,s)}effect(t){let e=new _;return t(e).pipe(h(this.destroy$)).subscribe(),n=>(j(n)?n:L(n)).pipe(h(this.destroy$)).subscribe(a=>{e.next(a)})}checkProviderForHooks(){x.schedule(()=>{if(W()&&(G(this)||J(this))&&!this.\u0275hasProvider){let t=[G(this)?"OnStoreInit":"",J(this)?"OnStateInit":""].filter(e=>e);console.warn(`@ngrx/component-store: ${this.constructor.name} has the ${t.join(" and ")} lifecycle hook(s) implemented without being provided using the provideComponentStore(${this.constructor.name}) function. To resolve this, provide the component store via provideComponentStore(${this.constructor.name})`)}})}assertStateIsInitialized(){if(!this.isInitialized)throw new Error(`${this.constructor.name} has not been initialized yet. Please make sure it is initialized before updating/getting.`)}static{this.\u0275fac=function(e){return new(e||r)(d(et,8))}}static{this.\u0275prov=g({token:r,factory:r.\u0275fac})}}return r})();function ot(r){let o=Array.from(r),e={debounce:!1,equal:(a,i)=>a===i};if(nt(o[o.length-1])&&(e=l(l({},e),o.pop())),o.length===1&&typeof o[0]!="function")return{observablesOrSelectorsObject:o[0],projector:void 0,config:e};let n=o.pop();return{observablesOrSelectorsObject:o,projector:n,config:e}}function nt(r){let o=r;return typeof o.debounce<"u"||typeof o.equal<"u"}function rt(r,o){return Array.isArray(r)&&r.length===0&&o}function Q(){return r=>r}function w(r,o,t){let e=typeof r=="function"?{next:r,error:o,complete:t}:r;return n=>n.pipe(p({next:e.next,complete:e.complete}),b(s=>(e.error(s),y)),e.finalize?U(e.finalize):s=>s)}var Z=class r extends X{constructor(t){super({logs:null,logsLoading:!1,reqLogs:null,reqLogsInProcess:!1});this.logsService=t}logsData$=this.select(t=>t.logs);isLoading$=this.select(t=>t.logsLoading);reqLogs$=this.select(t=>t.reqLogs);reqLogsInProcess$=this.select(t=>t.reqLogsInProcess);setLogs=this.updater((t,e)=>O(l({},t),{logs:e}));getLogs=this.effect(t=>t.pipe($(e=>(this.patchState({logsLoading:!0}),this.logsService.getProxyLogs(e).pipe(w(n=>this.patchState({logs:n,logsLoading:!1}),()=>this.patchState({logs:null,logsLoading:!1})),b(()=>y))))));getLogsById=this.effect(t=>t.pipe($(e=>(this.patchState({reqLogsInProcess:!0,reqLogs:null}),this.logsService.getProxyLogsById(e).pipe(w(n=>{this.patchState({reqLogsInProcess:!1,reqLogs:l({},n.data)})},n=>{this.patchState({reqLogsInProcess:!1})}))))));static \u0275fac=function(e){return new(e||r)(d(m))};static \u0275prov=g({token:r,factory:r.\u0275fac})};export{m as a,Z as b};

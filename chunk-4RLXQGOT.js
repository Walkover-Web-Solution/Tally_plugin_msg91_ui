import{t as _e,u as be}from"./chunk-LDRZFUXT.js";import{b as z}from"./chunk-OUDCL2ED.js";import{a as S,b as ge}from"./chunk-QZ7BSZRH.js";import{a as ae,b as me}from"./chunk-TU662ANO.js";import{a as D,b as $}from"./chunk-ZFTA7BNB.js";import{a as ie,b as ne,c as oe,d as re,e as le,f as se,g as ce,i as pe,j as ue,k as de,l as fe}from"./chunk-VDX6NWKR.js";import{a as q,c as B}from"./chunk-D4AXIO5U.js";import{a as w,b as he}from"./chunk-ZNMZKT3G.js";import{b as R}from"./chunk-EZFLHSCW.js";import{a as K,e as Q,f as Y}from"./chunk-XGUBUGXG.js";import{C as P,D as W,F as H,H as X,K as J,L as Z,N as ee,R as te,m as F,n as M,u as j,v as g,x as G,y as L,z as U}from"./chunk-7QRTSTHZ.js";import{Hb as l,Mb as k,Q as h,Ra as p,Va as x,_a as O,bb as N,cb as C,da as b,ic as T,kb as u,kc as I,qb as r,qc as A,rb as n,sb as v,tb as V,ub as E,wa as s,wb as y,xa as c,yb as d,zb as m}from"./chunk-536KNH2V.js";var Ce=a=>({"invalid-input":a});function ve(a,_){a&1&&(r(0,"mat-error"),l(1,"Please enter a valid Mobile Number"),n())}function ye(a,_){if(a&1){let i=y();V(0),r(1,"mat-form-field",13)(2,"input",14,0),d("keydown.enter",function(){s(i);let e=m();return c(e.intlPhone!=null&&e.intlPhone.isRequiredValidNumber?e.sendOtp():null)})("keypress",function(e){s(i);let o=m();return c(o.intlPhone==null?null:o.intlPhone.onlyPhoneNumber(e))})("input",function(){let e,o;s(i);let f=m();return(e=f.loginform.get("mobileNumber"))==null||e.setValue(f.intlPhone.phoneNumber),c(f.intlPhone!=null&&f.intlPhone.isValidNumber||(o=f.loginform.get("mobileNumber"))==null?null:o.setErrors({invalidNumber:!0}))})("blur",function(){let e;s(i);let o=m();return c((e=o.loginform.get("mobileNumber"))==null?null:e.markAsTouched())}),n(),r(4,"div",15),C(5,ve,2,0,"mat-error",8),n()(),r(6,"button",16),d("click",function(){s(i);let e=m();return c(e.sendOtp())}),l(7," Send"),n(),E()}if(a&2){let i,t,e,o=m();p(2),u("ngClass",k(3,Ce,((i=o.loginform.get("mobileNumber"))==null?null:i.touched)&&!(o.intlPhone!=null&&o.intlPhone.isRequiredValidNumber))),p(3),u("ngIf",((t=o.loginform.get("mobileNumber"))==null?null:t.touched)&&o.intlPhone&&!(o.intlPhone!=null&&o.intlPhone.isRequiredValidNumber)),p(),u("disabled",!(o.intlPhone!=null&&o.intlPhone.isRequiredValidNumber)||((e=o.loginform.get("mobileNumber"))==null?null:e.invalid)||!((e=o.loginform.get("mobileNumber"))!=null&&e.value))}}function Me(a,_){if(a&1){let i=y();r(0,"div")(1,"button",17),d("click",function(){s(i);let e=m();return c(e.backtoMobile())}),r(2,"mat-icon"),l(3,"keyboard_backspace"),n(),l(4,"Back"),n(),r(5,"div",18)(6,"mat-form-field",19)(7,"mat-label"),l(8,"OTP"),n(),v(9,"input",20),n()(),r(10,"div",21)(11,"button",16),d("click",function(){s(i);let e=m();return c(e.verifyOtp())}),l(12,"Verify"),n()()()}if(a&2){let i,t=m();p(11),u("disabled",(i=t.loginform.get("otp"))==null?null:i.invalid)}}function we(a,_){if(a&1){let i=y();r(0,"p",22),l(1," Doesn't have an account? "),r(2,"a",23),d("click",function(){s(i);let e=m();return c(e.register())}),l(3,"Register Here"),n()()}}var xe=class a extends he{constructor(i,t,e){super();this.store=i;this.router=t;this.toast=e;this.existotpverify$=this.store.pipe(M(Q),h(w),b(this.destroy$)),this.sendOtpSuccess$=this.store.pipe(M(K),h(w),b(this.destroy$)),this.otpLoading$=this.store.pipe(M(Y),h(w),b(this.destroy$))}islogin=!1;isOtpSent=!1;mobileNumber="";existotpverify$;otpLoading$;sendOtpSuccess$;mobilefield=!0;intlPhone;ngOnInit(){}ngAfterViewInit(){this.mobilefield&&setTimeout(()=>{this.initIntlPhone()})}initIntlPhone(){let i=document.querySelector("app-root")?.shadowRoot,t=document?.getElementById("mobile-input-wrapper"),e="assets/util/intl-tel-input-custom.css";t&&(this.intlPhone=new ge(t,i,e,!0))}loginform=new U({mobileNumber:new P("",[g.required,g.pattern(S)]),otp:new P("",[g.required,g.pattern(S)])});register(){this.router.navigate(["/register"])}otpsend(){this.islogin=!0}sendOtp(){let i=this.intlPhone?.phoneNumber||"",t=i.startsWith("+")?i.slice(1):i;!t&&t.length==12||(this.store.dispatch(Z({mobile:t})),this.toast.success("Otp Sent Successfully"),this.isOtpSent=!0,this.mobilefield=!1)}verifyOtp(){let i=this.loginform.get("mobileNumber")?.value??"",t=this.loginform.get("otp")?.value??"";!t||t.length!==4||(this.store.dispatch(ee({request:{mobile:i,otp:t}})),this.existotpverify$.subscribe(e=>{e&&(this.router.navigate(["/layout/logs"]),this.store.dispatch(te()))}))}backtoMobile(){this.isOtpSent=!1,this.mobilefield=!0,setTimeout(()=>{this.initIntlPhone()},100)}static \u0275fac=function(t){return new(t||a)(x(F),x(R),x(be))};static \u0275cmp=O({type:a,selectors:[["app-auth"]],features:[N],decls:29,vars:4,consts:[["mobileInput",""],[1,"content"],[1,"align-items-center","first"],[1,"align-items-center"],[1,"ml-5","login-content"],[1,"login-content1"],[1,"mt-4"],[3,"formGroup"],[4,"ngIf"],["class","ml-4 mt-4 account",4,"ngIf"],[1,"card"],[1,"card-content"],[1,"highlight"],["appearance","outline",1,"w-100",2,"position","relative","z-index","2"],["matInput","","formControlName","mobileNumber","placeholder","mobile number","type","tel","id","mobile-input-wrapper",3,"keydown.enter","keypress","input","blur","ngClass"],[2,"position","absolute","bottom","-23px"],["mat-flat-button","","color","primary",1,"w-100",3,"click","disabled"],["mat-button","",3,"click"],[1,"mt-2"],["appearance","outline",1,"w-100"],["matInput","","formControlName","otp","placeholder","Enter OTP"],[1,"justify-content-center"],[1,"ml-4","mt-4","account"],[1,"cursor-pointer","text-underline","link",3,"click"]],template:function(t,e){t&1&&(r(0,"div",1)(1,"div",2)(2,"div",3)(3,"p",4),l(4,"Welcome Back!"),n(),r(5,"p",5),l(6,"Start Managing your finance better and faster"),n()(),r(7,"div",6)(8,"form",7),C(9,ye,8,5,"ng-container",8)(10,Me,13,1,"div",8),n()(),C(11,we,4,0,"p",9),n(),r(12,"div")(13,"mat-card",10)(14,"mat-card-header")(15,"mat-card-title"),l(16,"Tally Plugin By MSG91"),n()(),r(17,"mat-card-content")(18,"p",11),l(19,"Send Invoices on Whatsapp and Email "),v(20,"br"),l(21," Via Tally"),n(),v(22,"mat-divider"),r(23,"p",12),l(24,"Automate your financial processes effortlessly with Tally. "),n(),r(25,"p"),l(26,"Streamline invoicing, effortlessly share ledgers, and efficiently recover"),n(),r(27,"p"),l(28," outstanding amounts, all within the Tally platform."),n()()()()()),t&2&&(p(8),u("formGroup",e.loginform),p(),u("ngIf",e.mobilefield),p(),u("ngIf",e.isOtpSent),p(),u("ngIf",!e.isOtpSent))},dependencies:[A,T,I,z,le,ie,oe,re,ne,B,q,ue,pe,se,ce,me,ae,fe,de,$,D,J,W,j,G,L,H,X,_e],styles:[".content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;box-sizing:border-box;background-color:#f5f5f5}.login-left[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;font-size:1.5rem;font-weight:700;padding:20px;margin-bottom:25%}.login-left[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin-top:10px}.card[_ngcontent-%COMP%]{height:700px;width:600px;padding:20px;background:#fff;box-shadow:0 4px 10px #0000001a;border-radius:10px}.first[_ngcontent-%COMP%]{margin-left:300px}.login-content[_ngcontent-%COMP%]{font-weight:700;font-size:xx-large}.login-content1[_ngcontent-%COMP%]{font-size:large;font-weight:500}.account[_ngcontent-%COMP%]{font-size:medium;font-weight:600}.link[_ngcontent-%COMP%]{color:#1b69a7}.mat-mdc-card-title[_ngcontent-%COMP%]{font-weight:400;font-size:35px}.highlight[_ngcontent-%COMP%]{font-size:30px;font-weight:500}.card-content[_ngcontent-%COMP%]{font-weight:700;font-size:15px}@media (max-width: 768px){.content[_ngcontent-%COMP%]{flex-direction:column;justify-content:center}.login-left[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]{width:90%;text-align:center}}"]})};export{xe as AuthComponent};

import{b as S}from"./chunk-A3ILYWTZ.js";import{c as F,f as B,g as R,h as q,i as z,j as L,k as H,l as J,m as K,n as Q,o as U,p as X,q as Y,r as Z}from"./chunk-MQYJI2WG.js";import{A as j,m as y,t as D,w as G}from"./chunk-NAYUG4EB.js";import{a as W,b as $}from"./chunk-ZH4UKMYG.js";import{b as E}from"./chunk-YPGEEL35.js";import{a as O,b as w,d as T,e as N,f as A,h,i as I,j as k,l as P,m as V}from"./chunk-7PJQ3XSE.js";import"./chunk-JOIM6ASN.js";import{Da as _,Eb as b,Ha as v,Ib as C,La as u,Pa as m,Ta as i,Tb as M,Ua as e,Va as p,Wa as x,Ya as s,Za as d,ea as f,fa as g,hb as n,za as l}from"./chunk-O5XYPMVI.js";function et(r,a){r&1&&(i(0,"mat-error"),n(1,"Valid mobile number required"),e())}function it(r,a){if(r&1){let t=x();i(0,"div")(1,"mat-form-field",7)(2,"mat-label"),n(3,"Mobile"),e(),p(4,"input",8),u(5,et,2,0,"mat-error",4),e(),i(6,"button",9),s("click",function(){f(t);let c=d();return g(c.sendOtp())}),n(7,"Send OTP"),e()()}if(r&2){let t,o=d();l(5),m("ngIf",(t=o.loginform.get("mobileNumber"))==null?null:t.invalid)}}function nt(r,a){r&1&&(i(0,"mat-error"),n(1,"Enter a valid OTP"),e())}function ot(r,a){if(r&1){let t=x();i(0,"div")(1,"mat-form-field",7)(2,"mat-label"),n(3,"OTP"),e(),p(4,"input",10),u(5,nt,2,0,"mat-error",4),e(),i(6,"button",2),s("click",function(){f(t);let c=d();return g(c.verifyOtp())}),n(7,"Login"),e()()}if(r&2){let t,o=d();l(5),m("ngIf",(t=o.loginform.get("otp"))==null?null:t.invalid)}}var tt=class r{constructor(a,t){this.store=a;this.router=t;this.existotpverify$=this.store.select(F)}islogin=!1;isOtpSent=!1;mobileNumber="";existotpverify$;loginform=new A({mobileNumber:new h("",[w.required]),otp:new h("")});register(){this.router.navigate(["/register"])}otpsend(){this.islogin=!0}sendOtp(){let a=this.loginform.get("mobileNumber")?.value??"";this.store.dispatch(D({mobile:a})),this.isOtpSent=!0}verifyOtp(){let a=this.loginform.get("mobileNumber")?.value??"",t=this.loginform.get("otp")?.value??"";!t||t.length!==4||(this.store.dispatch(G({request:{mobile:a,otp:t}})),this.existotpverify$.subscribe(o=>{o&&(this.router.navigate(["/layout/logs"]),this.store.dispatch(j()))}))}static \u0275fac=function(t){return new(t||r)(_(y),_(M))};static \u0275cmp=v({type:r,selectors:[["app-auth"]],decls:33,vars:3,consts:[[1,"content"],[1,"login-left"],["mat-flat-button","","color","primary",3,"click"],[3,"formGroup"],[4,"ngIf"],[1,"cursor-pointer",3,"click"],[1,"card"],["appearance","outline"],["matInput","","formControlName","mobileNumber","placeholder","Enter the mobile number"],["mat-flat-button","","color","accent",3,"click"],["matInput","","formControlName","otp","placeholder","Enter OTP"]],template:function(t,o){t&1&&(i(0,"div",0)(1,"div",1)(2,"div"),n(3," Welcome Back! "),e(),i(4,"p"),n(5,"Start Managing your finance better and faster"),e(),i(6,"button",2),s("click",function(){return o.otpsend()}),n(7,"Login with otp"),e(),i(8,"form",3),u(9,it,8,1,"div",4)(10,ot,8,1,"div",4),e(),i(11,"p"),n(12,"Doesn't have an account? "),i(13,"a",5),s("click",function(){return o.register()}),n(14,"Register Here"),e()()(),p(15,"div"),i(16,"div")(17,"mat-card",6)(18,"mat-card-header")(19,"mat-card-title"),n(20,"Tally Plugin By MSG91"),e()(),i(21,"mat-card-content")(22,"p"),n(23,"Send Invoices on Whatsapp and Email "),p(24,"br"),n(25," Via Tally"),e(),p(26,"mat-divider"),i(27,"p"),n(28,"Automate your financial processes effortlessly with Tally. "),e(),i(29,"p"),n(30,"Streamline invoicing, effortlessly share ledgers, and efficiently recover"),e(),i(31,"p"),n(32," outstanding amounts, all within the Tally platform."),e()()()()()),t&2&&(l(8),m("formGroup",o.loginform),l(),m("ngIf",o.islogin),l(),m("ngIf",o.isOtpSent))},dependencies:[C,b,S,L,B,q,z,R,J,H,X,U,K,Q,$,W,Z,Y,E,V,I,O,T,N,k,P],styles:[".content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100vw;height:100vh;padding:20px;box-sizing:border-box;background-color:#f5f5f5}.login-left[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;font-size:1.5rem;font-weight:700;padding:20px;margin-bottom:25%}.login-left[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin-top:10px}.card[_ngcontent-%COMP%]{height:700px;width:600px;padding:20px;background:#fff;box-shadow:0 4px 10px #0000001a;border-radius:10px}@media (max-width: 768px){.content[_ngcontent-%COMP%]{flex-direction:column;justify-content:center}.login-left[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]{width:90%;text-align:center}}"]})};export{tt as AuthComponent};
